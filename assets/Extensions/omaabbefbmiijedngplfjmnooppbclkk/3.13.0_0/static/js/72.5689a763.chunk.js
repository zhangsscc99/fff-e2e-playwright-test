"use strict";(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[72],{88072:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ge});var r=t(80184),s=t(72791),i=t(23098),a=t(47578),d=t(30168),o=t(65867),l=t(61945),c=t(91153),u=t(5784),m=t(47712),x=t(51599),f=t(13093),h=t(11707);function v(e){return!!e.dns}var p=t(87594),g=t(88754),j=t(76978),w=t(1849),_=t(12020),b=t(93853),k=t(20220),y=t(82820),Z=t(34692);function C(e){var n;const t=(0,p.tN)();return void 0!==e.sale||!(0,k._k)(t.active.rawAddress,null===(n=e.owner)||void 0===n?void 0:n.address)}var A=t(45928),P=t(41235),S=t(84879);function N(e,n){let{caller:t,queryKey:r,options:s}=e;const{api:i}=(0,p.bp)(),a=(0,p.tN)();return(0,P.useQuery)(r,(async()=>{const e=await t({...n,walletState:a,api:i}),r=await new S.f7_(i.tonApiV2).emulateMessageToAccountEvent({ignoreSignatureCheck:!0,accountId:a.active.rawAddress,decodeMessageRequest:{boc:e}});return{fee:new j.n({asset:w.Ct,weiAmount:-1*r.extra}),payload:{event:r}}}),s)}const T=e=>N({caller:A.gP,queryKey:["estimate-link-nft",e.nftAddress,e.linkToAddress]},e);var F=t(98502),R=t(86871),L=t(33455),$=t(48063),I=t(8676);function O(e,n){let{executor:t,eventName2:r}=e;const{t:s}=(0,l.$)(),a=(0,i._H)(),{api:d}=(0,p.bp)(),o=(0,p.tN)(),c=(0,P.useQueryClient)(),u=(0,L.BJ)(),{mutateAsync:m}=(0,I.Ug)();return(0,P.useMutation)((async()=>{if(!n.fee)return!1;const e=await(0,R.TC)(a,o.publicKey,m).catch((()=>null));if("cell"!==(null===e||void 0===e?void 0:e.type))throw new $.E(s("ledger_operation_not_supported"));if(null===e)return!1;u(r);try{await t({api:d,walletState:o,signer:e,...n})}catch(i){await(0,F.cB)(c,a,s,i)}return await c.invalidateQueries([o.active.rawAddress]),await c.invalidateQueries(),!0}))}const B=e=>O({executor:A.Uy,eventName2:"link-dns"},e);var H=t(14182),E=t(86749);function z(e){const n=(0,p.tN)(),t=(0,s.useRef)(!0),{isLoading:r,data:i,mutate:a}=(0,E.gW)();(0,s.useEffect)((()=>{t.current=!1,a({address:e})}),[e]);return{recipient:(0,s.useMemo)((()=>({address:{address:(0,k.Tg)(e,n.network,!0),blockchain:H.S.TON},comment:"",done:!1,toAccount:i})),[i]),isLoading:!!t.current||r}}function D(){const{t:e}=(0,l.$)(),n=(0,i._H)(),t=(0,P.useQueryClient)();return r=>(0,F.cB)(t,n,e,r)}function M(e,n){const[t,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),[d,o]=(0,s.useState)(!1),l=(0,s.useRef)(e.data),c=async()=>{const t=await e.refetch();if(d&&r(!1),n(t.data,l.current))return r(!1),void a(!0);l.current=t.data,setTimeout(c,1e3)};return(0,s.useEffect)((()=>()=>o(!0)),[]),{isLoading:t,isCompleted:i,data:e.data,refetch:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;l.current=e.data,r(!0),o(!1),a(!1),setTimeout((()=>{t&&o(!0)}),n),c()}}}var V,q,W,Q,K=t(73643),U=t(26503),J=t(59598),Y=t(90820),G=t(38705);const X=e=>{var n;let{nft:t}=e;const a=(0,i.pm)(),{t:d}=(0,l.$)(),o=(0,c.Lc)(t),{data:u,isLoading:m}=o,x=(null===u||void 0===u||null===(n=u.wallet)||void 0===n?void 0:n.address)||"",{refetch:f,isLoading:h,isCompleted:v}=M(o,((e,n)=>{var t,r;return!(null===n||void 0===n||null===(t=n.wallet)||void 0===t||!t.address)!==!(null===e||void 0===e||null===(r=e.wallet)||void 0===r||!r.address)}));return(0,s.useEffect)((()=>{v&&a(d(x?"dns_address_linked":"dns_address_unlinked"))}),[v,x]),x?(0,r.jsx)(oe,{nft:t,linkedAddress:x,isLoading:h,refetch:f}):(0,r.jsx)(re,{nft:t,isLoading:m||h,refetch:f})},ee=(0,o.ZP)(m.pN)(V||(V=(0,d.Z)(["\n    cursor: pointer;\n    color: ",";\n    pointer-events: ",";\n"])),(e=>e.isDisabled?e.theme.textSecondary:e.theme.textAccent),(e=>e.isDisabled?"none":"unset")),ne=new Z.Z(.02),te=j.n.fromRelativeAmount({asset:w.Ct,amount:ne}),re=e=>{var n;let{nft:t,isLoading:i,refetch:d}=e;const o=D(),{t:c}=(0,l.$)(),[u,m]=(0,s.useState)(),x=(0,p.tN)(),[f,h]=(0,s.useState)(x.active.rawAddress),v=e=>{if("wallet"===u)return m("confirm");m(void 0),e?d():h(x.active.rawAddress)},{recipient:j,isLoading:w}=z(t.address),{refetch:_,...Z}=T({nftAddress:t.address,amount:(0,b.$O)(ne),linkToAddress:f}),A=(0,s.useCallback)((async e=>{h(e),await _(),m("confirm")}),[_,t.address]),P=B({nftAddress:t.address,amount:(0,b.$O)(ne),linkToAddress:f,fee:null===(n=Z.data)||void 0===n?void 0:n.payload}),S=(0,k.ks)(f,x.active.rawAddress),N=(0,s.useCallback)((()=>(0,r.jsx)(ae,{onSave:A,isLoading:Z.isFetching,domain:t.dns})),[A,Z.isFetching]),R=C(t),L=(0,y.s)(t.dns);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.zx,{type:"button",size:"large",secondary:!0,fullWidth:!0,disabled:R,loading:Z.isFetching||w||i,onClick:()=>{Z.error?o(Z.error):m("confirm")},children:c(L?"nft_link_username_button":"nft_link_domain_button")}),(0,r.jsx)(a.P_,{title:c("wallet"===u?"wallet_address":"send_screen_steps_comfirm_title"),isOpen:!!u,hideButton:!0,handleClose:()=>v(),backShadow:!0,children:"wallet"===u?N:()=>(0,r.jsxs)(G.vp,{onClose:v,recipient:j,assetAmount:te,fitContent:!0,estimation:Z,...P,children:[(0,r.jsx)(G.tv,{}),(0,r.jsx)(G.eZ,{}),(0,r.jsxs)(G.CP,{children:[(0,r.jsx)(U.HC,{hover:!1,children:(0,r.jsxs)(U.me,{children:[(0,r.jsx)(J.__,{children:c(S?"dns_current_address":"wallet_address")}),(0,r.jsx)(K.Uc,{right:!0,text:(0,k.FN)((0,k.Tg)(f,x.network)),secondary:(0,r.jsx)(ee,{isDisabled:P.isLoading,onClick:()=>m("wallet"),children:c("replace")})})]})}),(0,r.jsx)(G.pk,{}),(0,r.jsx)(G.RB,{})]}),(0,r.jsx)(G.mC,{children:(0,r.jsx)(G.uq,{MainButton:F.Rn})})]})})]})},se=(0,o.ZP)(m.mI)(q||(q=(0,d.Z)(["\n    color: ",";\n    margin-bottom: 1.5rem;\n"])),(e=>e.theme.textSecondary)),ie=(0,o.ZP)(a.QT)(W||(W=(0,d.Z)(["\n    align-items: flex-start;\n"]))),ae=e=>{let{onSave:n,isLoading:t,domain:i}=e;const{t:a}=(0,l.$)(),[d,o]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),m=(0,s.useMemo)((()=>{if(!c)return!0;try{return h.Address.parse(d),!0}catch{return!1}}),[c,d]);return(0,r.jsxs)(ie,{onSubmit:e=>{e.stopPropagation(),e.preventDefault(),u(!0);try{n(h.Address.parse(d).toRawString())}catch(t){console.error(t)}},children:[(0,r.jsx)(se,{children:a("add_dns_address").replace("%1%",i)}),(0,r.jsx)(Y.II,{disabled:t,isValid:m,value:d,onChange:o,label:a("wallet_address"),clearButton:!0}),(0,r.jsx)(K.Zv,{}),(0,r.jsx)(g.zx,{fullWidth:!0,size:"large",primary:!0,disabled:!d,loading:t,children:"Save"})]})},de=(0,o.ZP)(m.pN)(Q||(Q=(0,d.Z)(["\n    text-align: center;\n    color: ",";\n"])),(e=>e.theme.accentOrange)),oe=e=>{var n;let{nft:t,linkedAddress:i,isLoading:d,refetch:o}=e;const c=D(),{t:u}=(0,l.$)(),m=(0,p.tN)(),[x,f]=(0,s.useState)(!1),h=e=>{f(!1),e&&o()},{recipient:v,isLoading:j}=z(t.address),w=T({nftAddress:t.address,amount:(0,b.$O)(ne),linkToAddress:""}),Z=B({nftAddress:t.address,amount:(0,b.$O)(ne),linkToAddress:"",fee:null===(n=w.data)||void 0===n?void 0:n.payload}),A=C(t),P=(0,y.s)(t.dns),S=Object.values((0,_.$R)(m.publicKey,m.network)).every((e=>!(0,k.ks)(e.rawAddress,i)));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.zx,{type:"button",size:"large",secondary:!0,fullWidth:!0,disabled:A,loading:w.isFetching||j||d,onClick:()=>{w.error?c(w.error):f(!0)},children:u("nft_unlink_domain_button").replace("{{address}}",(0,k.FN)((0,k.Tg)(i,m.network)))}),S&&!d&&(0,r.jsx)(de,{children:u(P?"tme_linked_with_another_address_warn":"dns_linked_with_another_address_warn")}),(0,r.jsx)(a.P_,{title:u("confirm_unlink"),isOpen:x,hideButton:!0,handleClose:()=>h(),backShadow:!0,children:()=>(0,r.jsxs)(G.vp,{onClose:h,recipient:v,assetAmount:te,fitContent:!0,estimation:w,...Z,children:[(0,r.jsx)(G.tv,{}),(0,r.jsx)(G.eZ,{}),(0,r.jsxs)(G.CP,{children:[(0,r.jsx)(G.pk,{}),(0,r.jsx)(G.RB,{})]}),(0,r.jsx)(G.mC,{children:(0,r.jsx)(G.uq,{MainButton:F.Rn})})]})})]})};var le=t(79297);var ce,ue,me,xe=t(17636);const fe=o.ZP.div(ce||(ce=(0,d.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"]))),he=(0,o.ZP)(g.zx)(ue||(ue=(0,d.Z)(["\n    margin-bottom: 0.75rem;\n"]))),ve=(0,o.ZP)(m.pN)(me||(me=(0,d.Z)(["\n    color: ",";\n"])),(e=>e.danger?e.theme.accentRed:e.theme.textSecondary)),pe=new Z.Z(.02),ge=j.n.fromRelativeAmount({asset:w.Ct,amount:new Z.Z(.02)}),je={year:"numeric",hour:void 0,minute:void 0},we=e=>{var n;let{nft:t}=e;const d=(0,i.pm)(),o=C(t),u=D(),{t:m,i18n:{language:x}}=(0,l.$)(),f=new Intl.RelativeTimeFormat((0,le.l1)(x),{style:"long"}),h=(0,c.id)(t),{data:v,isLoading:p}=h,{refetch:g,isLoading:j,isCompleted:w}=M(h,((e,n)=>!(null===e||void 0===e||!e.getTime())&&e.getTime()!==(null===n||void 0===n?void 0:n.getTime())));(0,s.useEffect)((()=>{w&&d(m("renew_nft_renewed"))}),[w]);const _=(0,xe.W)(Date.now()+316224e5,je),[k,y]=(0,s.useState)(!1),Z=e=>{y(!1),e&&g()},{recipient:P,isLoading:S}=z(t.address),T=(R={nftAddress:t.address,amount:(0,b.$O)(pe)},N({caller:A.mP,queryKey:["estimate-nft-renew",R.nftAddress]},R));var R;const L=(e=>O({executor:A.Uq,eventName2:"renew-dns"},e))({nftAddress:t.address,amount:(0,b.$O)(pe),fee:null===(n=T.data)||void 0===n?void 0:n.payload});if(!p&&!v)return null;const $=(0,xe.V)(v);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(fe,{children:[(0,r.jsx)(he,{type:"button",disabled:o||j,loading:p||T.isFetching||S,onClick:()=>{T.error?u(T.error):y(!0)},size:"large",secondary:!0,fullWidth:!0,children:j?m("renew_nft_in_progress"):m("dns_renew_until_btn").replace("%{untilDate}",_)}),""!==$&&(0,r.jsx)(ve,{danger:Number($)<=30,children:m("renew_nft_expiration_date").replace("%1%",f.format(Number($),"days"))})]}),(0,r.jsx)(a.P_,{isOpen:k,hideButton:!0,handleClose:()=>Z,backShadow:!0,children:()=>(0,r.jsx)(G.vp,{onClose:Z,recipient:P,assetAmount:ge,fitContent:!0,estimation:T,...L,children:(0,r.jsx)(G.mC,{children:(0,r.jsx)(G.uq,{MainButton:F.Rn})})})})]})};var _e,be;const ke=e=>{const{marketplace:n}=e.metadata,t=h.Address.parse(e.address).toString();return"https://getgems.io/nft/".concat(t)},ye=e=>{let{url:n}=e;const{t:t}=(0,l.$)(),s=(0,i._H)();return(0,r.jsx)(g.zx,{size:"large",secondary:!0,fullWidth:!0,onClick:e=>{e.preventDefault(),e.stopPropagation(),s.openPage(n)},children:t("nft_open_in_marketplace")})},Ze=e=>{var n;let{nftItem:t}=e;const s=(0,i._H)(),{t:a}=(0,l.$)(),d=(0,p.tN)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.zx,{primary:!0,size:"large",fullWidth:!0,disabled:void 0!==t.sale||(null===(n=t.owner)||void 0===n?void 0:n.address)!==d.active.rawAddress,onClick:e=>{e.preventDefault(),e.stopPropagation(),s.uiEvents.emit("transferNft",{method:"transferNft",params:t})},children:a("nft_transfer_nft")}),t.sale&&(0,r.jsx)(Ae,{children:a("nft_on_sale_text")})]})},Ce=(0,o.ZP)(m.pN)(_e||(_e=(0,d.Z)(["\n    width: 100%;\n    color: ",";\n"])),(e=>e.theme.textSecondary)),Ae=(0,o.ZP)(Ce)(be||(be=(0,d.Z)(["\n    width: 100%;\n    padding: 0 1rem;\n    text-align: left;\n"]))),Pe=e=>{let{kind:n,nftItem:t}=e;switch(n){case"token":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ze,{nftItem:t}),(0,r.jsx)(ye,{url:ke(t)})]});case"ton.dns":var s;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ze,{nftItem:t}),(0,r.jsx)(ye,{url:"https://dns.ton.org/#".concat(null===(s=t.dns)||void 0===s?void 0:s.slice(0,-4))}),v(t)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X,{nft:t}),(0,r.jsx)(we,{nft:t})]})]});case"telegram.number":{const e=t.metadata.name.replace(/\s/g,"").slice(1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ze,{nftItem:t}),(0,r.jsx)(ye,{url:"https://fragment.com/number/".concat(e)})]})}case"telegram.name":var i;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ze,{nftItem:t}),(0,r.jsx)(ye,{url:"https://fragment.com/username/".concat(null===(i=t.dns)||void 0===i?void 0:i.slice(0,-5))}),v(t)&&(0,r.jsx)(X,{nft:t})]})}};var Se,Ne,Te,Fe;const Re=o.ZP.div(Se||(Se=(0,d.Z)(["\n    width: 100%;\n"]))),Le=o.ZP.div(Ne||(Ne=(0,d.Z)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 0.625rem;\n"]))),$e=(0,o.ZP)(m.RV)(Te||(Te=(0,d.Z)(["\n    cursor: pointer;\n    color: ",";\n"])),(e=>e.theme.textAccent)),Ie=(0,o.ZP)(m.mI)(Fe||(Fe=(0,d.Z)(["\n    color: ",";\n"])),(e=>e.theme.textSecondary)),Oe=s.memo((e=>{var n,t;let{nftItem:s}=e;const a=(0,p.tN)(),{t:d}=(0,l.$)(),{data:o}=(0,c.T_)(s.address),{data:x,isLoading:f}=(0,c.id)(s),v=(0,xe.W)(x,{year:"numeric",hour:void 0,minute:void 0}),g=null!==o&&void 0!==o?o:s,j=(0,i._H)(),{config:w}=(0,p.bp)(),_=null===(n=g.owner)||void 0===n?void 0:n.address,b=h.Address.parse(g.address).toString(),y=null!==(t=w.NFTOnExplorerUrl)&&void 0!==t?t:"https://tonviewer.com/nft/%s",Z=(0,k.Tg)(b,a.network,!0);return(0,r.jsxs)(Re,{children:[(0,r.jsxs)(Le,{children:[(0,r.jsx)(m.H3,{children:d("nft_details")}),(0,r.jsx)($e,{onClick:()=>j.openPage(y.replace("%s",b)),children:d("nft_view_in_explorer")})]}),(0,r.jsxs)(U.L8,{margin:!1,children:[_&&(0,r.jsx)(U.HC,{onClick:()=>j.copyToClipboard((0,k.Tg)(_,a.network)),children:(0,r.jsxs)(U.me,{children:[(0,r.jsx)(Ie,{children:d("nft_owner_address")}),(0,r.jsx)(m.RV,{children:(0,k.FN)((0,k.Tg)(_,a.network))})]})}),!(!x&&!f)&&(0,r.jsx)(U.HC,{hover:!1,children:(0,r.jsxs)(U.me,{children:[(0,r.jsx)(Ie,{children:d("dns_expiration_date")}),x?(0,r.jsx)(m.RV,{children:v}):(0,r.jsx)(u.L4,{})]})}),(0,r.jsx)(U.HC,{onClick:()=>j.copyToClipboard(Z),children:(0,r.jsxs)(U.me,{children:[(0,r.jsx)(Ie,{children:d("nft_contract_address")}),(0,r.jsx)(m.RV,{children:(0,k.FN)(Z)})]})})]})]})}));var Be,He,Ee,ze,De,Me,Ve=t(74639);const qe=o.ZP.div(Be||(Be=(0,d.Z)(["\n    display: flex;\n    flex-direction: column;\n    padding: 0.875rem 1rem;\n"]))),We=o.ZP.div(He||(He=(0,d.Z)(["\n    border-top: 1px solid ",";\n"])),(e=>e.theme.separatorCommon)),Qe=(0,o.ZP)(m.RV)(Ee||(Ee=(0,d.Z)(["\n    margin-bottom: 0.5rem;\n"]))),Ke=o.ZP.span(ze||(ze=(0,d.Z)(["\n    position: relative;\n    top: 3px;\n    margin-left: 4px;\n"]))),Ue=(0,o.ZP)(m.H2)(De||(De=(0,d.Z)(["\n    word-break: break-word;\n\n    user-select: none;\n"]))),Je=(0,o.ZP)(m.cV)(Me||(Me=(0,d.Z)(["\n    color: ",";\n    border: 1px solid ",";\n    border-radius: 6px;\n    padding: 3.5px 6px 4.5px;\n    text-transform: uppercase;\n\n    position: relative;\n    top: -3px;\n\n    white-space: nowrap;\n"])),(e=>e.theme.textSecondary),(e=>e.theme.buttonTertiaryBackground)),Ye=e=>{var n,t,i,d,o;let{onClose:h,nftItem:v}=e;const p=(0,s.useRef)(null),{t:g}=(0,l.$)(),{data:j}=(0,c._7)(v),{description:w}=v.metadata,_=null!==(n=v.dns)&&void 0!==n?n:v.metadata.name,b=(0,s.useMemo)((()=>{var e;switch(null===(e=v.collection)||void 0===e?void 0:e.address){case"0:b774d95eb20543f186c06b371ab88ad704f7e256130caf96189368a7d0cb6ccf":return"ton.dns";case"0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2":return"telegram.name";case"0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2":return"telegram.number";default:return"token"}}),[v]),k=null===v||void 0===v||null===(t=v.collection)||void 0===t?void 0:t.name,y=null===(i=v.previews)||void 0===i?void 0:i.find((e=>"1500x1500"===e.resolution));return(0,r.jsxs)(a.QT,{children:[h&&(0,r.jsxs)(a.hy,{children:[(0,r.jsx)(x.xE,{onClick:h,children:(0,r.jsx)(u.v4,{})}),(0,r.jsx)(m.H3,{children:null!==(d=v.dns)&&void 0!==d?d:v.metadata.name}),(0,r.jsx)(x.Jw,{})]}),(0,r.jsxs)(Ve.qR,{children:[y&&(0,r.jsx)(Ve.Ee,{ref:p,url:y.url}),(0,r.jsxs)(qe,{children:[(0,r.jsxs)(Ue,{children:[_,v.sale&&(0,r.jsxs)(r.Fragment,{children:["  ",(0,r.jsx)(Je,{children:g("nft_on_sale")})]})]}),k&&(0,r.jsxs)(f.u,{open:!0,margin:"small",children:[k,v.approvedBy&&v.approvedBy.length>0&&(0,r.jsx)(Ke,{children:(0,r.jsx)(u.of,{})})]}),w&&(0,r.jsx)(f.F,{text:w,margin:"last",contentColor:!0})]}),j&&(null===(o=j.metadata)||void 0===o?void 0:o.description)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(We,{}),(0,r.jsxs)(qe,{children:[(0,r.jsx)(Qe,{children:g("nft_about_collection")}),(0,r.jsx)(f.F,{text:j.metadata.description,margin:"last",contentColor:!0})]})]})]}),(0,r.jsx)(Pe,{nftItem:v,kind:b}),(0,r.jsx)(Oe,{nftItem:v,kind:b})]})},Ge=()=>{const e=(0,i._H)(),[n,t]=(0,s.useState)(void 0),d=(0,s.useCallback)((()=>{t(void 0)}),[t]);(0,s.useEffect)((()=>{const n=e=>{t(e.params)};return e.uiEvents.on("nft",n),()=>{e.uiEvents.off("nft",n)}}),[e,t]);const o=(0,s.useCallback)((()=>{if(n)return(0,r.jsx)(Ye,{onClose:d,nftItem:n})}),[n,d]);return(0,r.jsx)(a.P_,{isOpen:void 0!==n,hideButton:!0,handleClose:d,backShadow:!0,children:o})}},74639:(e,n,t)=>{t.d(n,{Ee:()=>C,JQ:()=>T,qR:()=>y});var r,s,i,a,d,o,l,c,u,m,x=t(30168),f=t(80184),h=t(72791),v=t(65867),p=t(87594),g=t(23098),j=t(17636),w=t(91153),_=t(5784),b=t(67418);const k=v.ZP.div(r||(r=(0,x.Z)(["\n    display: grid;\n    margin: 0 0 2rem 0;\n    gap: 0.5rem;\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n"]))),y=v.ZP.div(s||(s=(0,x.Z)(["\n    position: relative;\n    user-select: none;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n\n    background-color: ",";\n    transition: background-color 0.1s ease;\n\n    border-radius: ",";\n\n    overflow: hidden;\n\n    ","\n"])),(e=>e.theme.backgroundContent),(e=>e.theme.cornerSmall),(e=>e.ios?e.isHover?(0,v.iv)(i||(i=(0,x.Z)(["\n                    background-color: ",";\n                "])),e.theme.backgroundContentTint):void 0:e.hover?(0,v.iv)(a||(a=(0,x.Z)(["\n                    cursor: pointer;\n\n                    &:hover {\n                        background-color: ",";\n                    }\n                "])),e.theme.backgroundContentTint):void 0)),Z=v.ZP.div(d||(d=(0,x.Z)(["\n    width: 100%;\n    position: relative;\n"]))),C=v.ZP.div(o||(o=(0,x.Z)(["\n    width: 100%;\n    padding-bottom: 100%;\n\n    ","\n    background-size: cover;\n"])),(e=>e.url&&(0,v.iv)(l||(l=(0,x.Z)(["\n            background-image: url('","');\n        "])),e.url))),A=v.ZP.div(c||(c=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    padding: 0.5rem 0.75rem 0.5rem;\n    white-space: nowrap;\n"]))),P=v.ZP.div(u||(u=(0,x.Z)(["\n    position: absolute;\n    top: 10px;\n    right: 8px;\n"]))),S=v.ZP.div(m||(m=(0,x.Z)(["\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    height: 32px;\n    width: 32px;\n"]))),N=h.memo((e=>{var n;let{nft:t,resolution:r,onOpen:s}=e;const i=void 0!==t.sale,a=null===(n=t.previews)||void 0===n?void 0:n.find((e=>e.resolution===r)),{ios:d}=(0,p.bp)(),[o,l]=(0,h.useState)(!1),c=(0,h.useRef)(null),u=(0,h.useContext)(p._N),{data:m}=(0,w.id)(t);(0,h.useLayoutEffect)((()=>{c.current&&u&&c.current.contains(u)?l(!0):l(!1)}),[c.current,u,l]);const x=m&&Number((0,j.V)(m))<=30;return(0,f.jsxs)(y,{hover:!0,isHover:o,ios:d,ref:c,onClick:()=>s(t),children:[(0,f.jsxs)(Z,{children:[(0,f.jsx)(C,{url:null===a||void 0===a?void 0:a.url}),i&&(0,f.jsx)(P,{children:(0,f.jsx)(_.rG,{})}),x&&(0,f.jsx)(S,{children:(0,f.jsx)(_.XN,{})})]}),(0,f.jsxs)(A,{children:[(0,f.jsx)(b.Ok,{nft:t}),(0,f.jsx)(b.is,{nft:t})]})]})})),T=e=>{let{nfts:n,className:t}=e;const r=(0,g._H)();return(0,f.jsx)(k,{className:t,children:(null!==n&&void 0!==n?n:[]).map((e=>{var n;return"hidden"===(null===(n=e.metadata)||void 0===n?void 0:n.render_type)?(0,f.jsx)(f.Fragment,{}):(0,f.jsx)(N,{nft:e,resolution:"500x500",onOpen:()=>r.openNft(e)},e.address)}))})}},17636:(e,n,t)=>{t.d(n,{V:()=>d,W:()=>a});var r=t(79297),s=t(72791),i=t(61945);function a(e,n){const{i18n:t}=(0,i.$)();return(0,s.useMemo)((()=>e?new Intl.DateTimeFormat((0,r.l1)(t.language),{month:"short",day:"numeric",year:(new Date).getFullYear()-1===new Date(e).getFullYear()?"numeric":void 0,hour:"numeric",minute:"numeric",...n}).format(e):""),[e,t.language,n])}function d(e){if(!e)return"";const n=Math.floor((new Date(e).getTime()-Date.now())/864e5);return n<0?"0":n.toString()}}}]);
//# sourceMappingURL=72.5689a763.chunk.js.map