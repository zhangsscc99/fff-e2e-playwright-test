"use strict";(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[414],{58687:(e,n,t)=>{t.d(n,{y:()=>a});var i=t(14182);function a(e){return e.blockchain===i.S.TON}},80414:(e,n,t)=>{t.r(n),t.d(n,{default:()=>pe});var i=t(80184),a=t(14182),o=t(76978),s=t(1849),r=t(48544),l=t(18203),c=t(93853),u=t(34692),d=t(72791),p=t(4959),m=t(73485),h=t(87594),f=t(23098),x=t(42770),v=t(61945),j=t(82430),w=t(7393),k=t(35300),y=t(91153),b=t(47578),g=t(8741),V=t(97667),E=t(38705);const C=e=>{let{isMax:n,...t}=e;const a=(0,g.g)(t.recipient,t.assetAmount,n),o=(0,V.N)(t.recipient,t.assetAmount,n,a.data);return(0,i.jsx)(E.vp,{estimation:a,...o,...t})};var R,M=t(86749),A=t(144),S=t(61819),_=t(87812),Z=t(57443),O=t(73643),F=t(47712),B=t(30168),T=t(65867);const N=T.ZP.input(R||(R=(0,B.Z)(["\n    padding: 0;\n    margin: 0;\n    border: none;\n    outline: none;\n    /* added styles */\n    font-family: inherit;\n    font-size: inherit;\n    background: transparent;\n    color: ",";\n\n    font-family: 'Montserrat', sans-serif;\n    font-style: normal;\n    font-weight: 600;\n\n    line-height: 49px;\n    text-align: right;\n\n    -moz-appearance: textfield;\n\n    &::-webkit-outer-spin-button,\n    &::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n    }\n"])),(e=>e.theme.textPrimary)),P=d.forwardRef(((e,n)=>{let{value:t,setValue:a,inputSize:o}=e;return(0,i.jsx)(N,{autoComplete:"off",id:"sentence",ref:n,style:{fontSize:"".concat(o.size,"px"),width:"".concat(o.width,"px")},inputMode:"decimal",type:"text",value:t,onChange:e=>{a(e.target.value)}})}));P.displayName="Sentence";var L,D,J,z,H,q,U=t(12850),I=t(79309),$=t(5784),Q=t(26503);const W=T.ZP.div(L||(L=(0,B.Z)(["\n    background: ",";\n    border-radius: ",";\n    padding: 0.5rem 1rem;\n    display: flex;\n    gap: 0.5rem;\n"])),(e=>e.theme.buttonTertiaryBackground),(e=>e.theme.cornerMedium)),K=T.ZP.span(D||(D=(0,B.Z)(["\n    color: ",";\n    display: flex;\n    align-items: center;\n"])),(e=>e.theme.iconSecondary)),G=T.ZP.img(J||(J=(0,B.Z)(["\n    border-radius: ",";\n    width: 24px;\n    height: 24px;\n"])),(e=>e.theme.cornerFull)),X=T.ZP.div(z||(z=(0,B.Z)(["\n    display: flex;\n    gap: 0.5rem;\n    width: 200px;\n    overflow: hidden;\n"]))),Y=(0,T.ZP)(F.mI)(H||(H=(0,B.Z)(["\n    color: ",";\n    text-overflow: ellipsis;\n    overflow: hidden;\n"])),(e=>e.theme.textSecondary)),ee=T.ZP.span(q||(q=(0,B.Z)(["\n    padding-left: 0.5rem;\n    color: ",";\n    display: flex;\n"])),(e=>e.theme.accentBlue)),ne=e=>{var n;let{onClose:t,jetton:o,jettons:s,setJetton:r,info:l}=e;const c=(0,S.rs)(),u=(0,d.useRef)(null);return(0,d.useEffect)((()=>{var e;u.current&&(null===(e=u.current.parentElement)||void 0===e||null===(e=e.parentElement)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[u]),(0,i.jsxs)(Q.L8,{margin:!1,dropDown:!0,children:[(0,i.jsx)(Q.HC,{dropDown:!0,onClick:()=>{r(a.C.TON),t()},children:(0,i.jsxs)(Q.me,{children:[(0,i.jsxs)(X,{children:[(0,i.jsx)(G,{src:"https://wallet.tonkeeper.com/img/toncoin.svg"}),(0,i.jsx)(F.RV,{children:a.C.TON}),(0,i.jsx)(Y,{children:c(null!==(n=null===l||void 0===l?void 0:l.balance)&&void 0!==n?n:0)})]}),a.C.TON===o?(0,i.jsx)(ee,{children:(0,i.jsx)($.qw,{})}):void 0]})}),s.balances.map((e=>(0,i.jsx)(Q.HC,{dropDown:!0,onClick:()=>{r(e.jetton.address),t()},children:(0,i.jsxs)(Q.me,{children:[(0,i.jsxs)(X,{children:[(0,i.jsx)(G,{src:e.jetton.image}),(0,i.jsx)(F.RV,{children:e.jetton.symbol}),(0,i.jsx)(Y,{children:c(e.balance,e.jetton.decimals)})]}),e.jetton.address===o?(0,i.jsx)(ee,{ref:u,children:(0,i.jsx)($.qw,{})}):void 0]})},e.jetton.address)))]})},te=e=>{let{jetton:n,jettons:t,setJetton:a,info:o}=e;return(0,i.jsx)(I.vb,{center:!0,payload:e=>(0,i.jsx)(ne,{info:o,onClose:e,jetton:n,jettons:t,setJetton:a}),children:(0,i.jsxs)(W,{children:[(0,i.jsx)(F.RV,{children:(0,A.TB)(n,t)}),(0,i.jsx)(K,{children:(0,i.jsx)($.KL,{})})]})})};var ie=t(81987);const ae=(e,n)=>{const{ios:t,standalone:i}=(0,h.bp)();(0,d.useEffect)((()=>{if(!t)return;const a=window.innerHeight;function o(){const t=e.current;if(!t)return;const o=a-this.height+16,s=i?Math.max(32,o):o;t.style.bottom="".concat(s,"px");const r=Math.min(this.height-16-56-16-36-16-16-16-16-37,272);n.current&&(n.current.style.height="".concat(r,"px"))}const s=window.visualViewport;return s&&(setTimeout((()=>o.call(s)),300),s.addEventListener("resize",o)),()=>{!function(){const n=window.visualViewport;n&&n.removeEventListener("resize",o),setTimeout((()=>{const n=e.current;n&&(n.style.bottom=null)}))}()}}),[e.current,n.current])},oe={size:40,width:30};var se=t(27494);function re(e){return e.toFormat({groupSeparator:(0,se.ce)(),decimalSeparator:(0,se.Yz)()})}const le=(e,n)=>{const{kind:t,payload:i}=n;switch(t){case"select":return{inputValue:"0",coinValue:new u.Z(0),token:i.token,inFiat:!1,isMax:!1};case"max":if(void 0!==i.prices){const n=i.value.multipliedBy(i.prices).decimalPlaces(2,u.Z.ROUND_FLOOR);return{...e,inputValue:re(e.inFiat?n:i.value),fiatValue:n,coinValue:i.value,isMax:!e.isMax}}return{...e,inputValue:re(i.value),coinValue:i.value,isMax:!e.isMax};case"input":{var a,o;const n=e.inFiat?2:e.token.decimals;let t=(0,U.VI)(i.value);(0,U.vu)(t,n)||(t=e.inputValue),(0,A.kE)(t)&&(t=(0,A.z6)(t));const s=(0,U.NU)(t),r=e.inFiat?s.div(null!==(a=i.prices)&&void 0!==a?a:0):s,l=e.inFiat?s:s.multipliedBy(null!==(o=i.prices)&&void 0!==o?o:0);return{...e,inputValue:t,coinValue:r,fiatValue:l,isMax:!1}}case"price":{if(!i.prices)return e;const n=e.coinValue.multipliedBy(i.prices).decimalPlaces(2,u.Z.ROUND_FLOOR);return{...e,fiatValue:n}}case"toggle":{var s,r;const n=re(e.inFiat?e.coinValue.decimalPlaces(e.token.decimals,u.Z.ROUND_FLOOR):null!==(s=null===(r=e.fiatValue)||void 0===r?void 0:r.decimalPlaces(2,u.Z.ROUND_FLOOR))&&void 0!==s?s:new u.Z(0));return{...e,inputValue:n,inFiat:!e.inFiat}}default:return e}},ce=e=>{let{recipient:n,onClose:t,onBack:o,onConfirm:l,defaults:c,MainButton:p,HeaderBlock:m,isAnimationProcess:x}=e;const{t:k}=(0,v.$)(),g=(0,f._H)(),{standalone:V,fiat:E}=(0,h.bp)(),C=n.address.blockchain,R=(0,j.c)()&&x,{data:M}=(0,y.oJ)(),B=(0,w.oI)(M),{data:T}=(0,y.IR)(),[N,L]=(0,d.useReducer)(le,((e,n)=>{var t,i,o,r;const l=null!==(t=null===e||void 0===e?void 0:e.inFiat)&&void 0!==t&&t;return{inputValue:null!==(i=null===e||void 0===e?void 0:e.inputValue)&&void 0!==i?i:re((l?null===e||void 0===e?void 0:e.fiatValue:null===e||void 0===e?void 0:e.coinValue)||new u.Z(0)),coinValue:null!==(o=null===e||void 0===e?void 0:e.coinValue)&&void 0!==o?o:new u.Z(0),fiatValue:null===e||void 0===e?void 0:e.fiatValue,token:(null===e||void 0===e?void 0:e.token)||(n===a.S.TON?s.Ct:s.tr),inFiat:l,isMax:null!==(r=null===e||void 0===e?void 0:e.isMax)&&void 0!==r&&r}})(c,C)),{data:D,isLoading:J}=(0,Z.UJ)((e=>e.token.blockchain===a.S.TRON?e.token.symbol:(0,r.mi)(e.token,{userFriendly:!0}))(N)),{data:z,isLoading:H}=(0,_.t6)(N.token),q=(0,d.useRef)(null),I=(0,d.useRef)(null),$=(0,d.useRef)(null);ae($,I),((e,n)=>{(0,d.useEffect)((()=>{const n=setTimeout((()=>{e.current&&e.current.focus()}),300);return()=>{clearTimeout(n)}}),[e.current,n])})(q,N.token);const[Q,W]=(0,d.useState)(oe);(0,d.useLayoutEffect)((()=>{I.current&&W(((e,n)=>{const t=n.clientWidth;let i=oe.size,a=(0,ie.m)(e,"600 ".concat(i,"px 'Montserrat'"));for(;Math.round(a)>t-115;)i=Math.max(1,i-1),a=(0,ie.m)(e,"600 ".concat(i,"px 'Montserrat'"));return{width:Math.max(Math.round(a)+5,6*e.length,30),size:i}})(N.inputValue,I.current))}),[I.current,N.inputValue]),(0,d.useEffect)((()=>{L({kind:"price",payload:{prices:null===D||void 0===D?void 0:D.prices}})}),[L,D]);const K=(0,d.useCallback)((()=>{L({kind:"toggle",payload:void 0})}),[]),G=(0,d.useCallback)((e=>{L({kind:"input",payload:{value:e,prices:null===D||void 0===D?void 0:D.prices}})}),[L,D]),X=(0,d.useCallback)((()=>{L({kind:"max",payload:{value:z.relativeAmount,prices:null===D||void 0===D?void 0:D.prices}})}),[L,z,D]),Y=(0,d.useCallback)((e=>{L({kind:"select",payload:{token:(0,r.Px)(e,B)}})}),[L,B]),ee=z.relativeAmount.minus(N.coinValue),ne=ee.gte(0),se=(0,d.useMemo)((()=>ne&&(0,A.kE)(N.inputValue)&&(0,U.NU)(N.inputValue).isGreaterThan(0)),[ne,N.inputValue]),ce=(0,d.useCallback)((()=>{o(N)}),[o,N]),ue=(0,d.useCallback)((()=>{se?l(N):g.hapticNotification("error")}),[se,l,N,g]);return(0,i.jsxs)(b.r4,{onSubmit:async e=>{e.stopPropagation(),e.preventDefault(),ue()},standalone:V,children:[!R&&(0,i.jsx)(b.JE,{children:(0,i.jsx)(b.O$,{children:(0,i.jsx)(m,{onClose:t,onBack:ce,children:(0,i.jsxs)(U.DK,{children:[k("send_screen_steps_done_to").replace("%{name}",""),(0,i.jsx)(U.XT,{recipient:n}),(0,i.jsx)(U.b9,{recipient:n})]})})})}),(0,i.jsxs)(U.wU,{ref:I,children:[(0,i.jsx)(U.je,{children:C===a.S.TON?(0,i.jsx)(te,{info:T,jetton:(0,r.mi)(N.token),setJetton:Y,jettons:B}):(0,i.jsx)(U.bx,{children:(0,i.jsx)(F.RV,{children:"TRC20"})})}),(0,i.jsxs)(U.S7,{children:[(0,i.jsx)(P,{ref:q,value:N.inputValue,setValue:G,inputSize:Q}),(0,i.jsx)(U.mN,{children:N.inFiat?E:N.token.symbol})]}),(0,i.jsx)(U.t$,{amountState:N,toggleFiat:K})]}),(0,i.jsxs)(U.X$,{children:[(0,i.jsx)(U.ER,{maxValue:N.isMax,onClick:X,children:k("send_screen_steps_amount_max")}),ne?(0,i.jsxs)(U.JD,{children:[k("send_screen_steps_amount_remaining").replace("%{amount}",S.zW.format(ee,{decimals:N.token.decimals}))," ",N.token.symbol]}):(0,i.jsx)(U.rL,{children:k("send_screen_steps_amount_insufficient_balance")})]}),(0,i.jsx)(O.Zv,{}),!R&&(0,i.jsx)(b.gH,{children:(0,i.jsx)(b.B6,{children:(0,i.jsx)(p,{ref:$,isDisabled:!se,isLoading:J||H,onClick:ue})})})]})};var ue=t(98502);const de=e=>{let{onClose:n,chain:t,initRecipient:g,initAmountState:V}=e;const R=(0,f._H)(),{standalone:A,ios:S,extension:_}=(0,h.bp)(),{t:Z}=(0,v.$)(),{data:O}=(0,y.oJ)(),F=(0,w.oI)(O),B=(0,j.c)(),[T,N]=(0,d.useState)("recipient"),[P,L]=(0,d.useState)(!0),[D,J]=(0,d.useState)(g),[z,H]=(0,d.useState)(V),{data:q}=(0,k.Ru)(),{mutateAsync:U,isLoading:I}=(0,M.gW)(),$=e=>{var n,t;null!==z&&void 0!==z&&null!==(n=z.token)&&void 0!==n&&n.blockchain&&(null===z||void 0===z||null===(t=z.token)||void 0===t?void 0:t.blockchain)!==e.address.blockchain&&H(void 0),J(e),q&&e.address.blockchain===a.S.TRON&&H({token:(0,s.FZ)(q.balances[0])})},Q=e=>{L(!0),$(e),N("amount")},W=e=>{L(!0),H(e),N("confirm")},K=e=>{L(!1),H(e),N("recipient")},G=()=>{S&&(0,x.Q)("decimal"),L(!1),N("amount")},X=(0,d.useCallback)((async e=>{let{amount:n,jetton:t}=e;if(t){let e;try{e=(0,r.Px)(t,F)}catch(i){return R.uiEvents.emit("copy",{method:"copy",params:Z("Unexpected_QR_Code")}),!1}const a=new o.n({asset:e,weiAmount:n||"0"});H({coinValue:a.relativeAmount,token:e,inFiat:!1,isMax:!1})}else H({coinValue:n?(0,c.PE)(n):new u.Z("0"),token:null===V||void 0===V?void 0:V.token,inFiat:!1,isMax:!1});return!0}),[R,F,null===V||void 0===V?void 0:V.token]),Y=async e=>{const n=(0,l.M)({url:e});if(!n)return R.uiEvents.emit("copy",{method:"copy",params:Z("Unexpected_QR_Code")});await X(n)&&await(async e=>{let{address:n,text:t}=e;const i={address:n,blockchain:a.S.TON},o=await U(i),s=!o.memoRequired||!(!o.memoRequired||!t);$({address:i,toAccount:o,comment:null!==t&&void 0!==t?t:"",done:s}),s&&N("amount")})(n)},ee={recipient:(0,d.useRef)(null),amount:(0,d.useRef)(null),confirm:(0,d.useRef)(null)}[T];return(0,i.jsx)(ue.im,{standalone:A,extension:_,children:(0,i.jsx)(p.Z,{childFactory:(0,ue.mH)(P),children:(0,i.jsx)(m.Z,{nodeRef:ee,classNames:"right-to-left",addEndListener:e=>{setTimeout(e,ue.x9)},children:e=>(0,i.jsxs)("div",{ref:ee,children:["recipient"===T&&(0,i.jsx)(M.Aq,{data:D,setRecipient:Q,onScan:Y,keyboard:"decimal",isExternalLoading:I,acceptBlockchains:t?[t]:void 0,MainButton:ue.c7,HeaderBlock:()=>(0,i.jsx)(ue.ap,{title:Z("transaction_recipient"),onClose:n}),isAnimationProcess:"exiting"===e}),"amount"===T&&(0,i.jsx)(ce,{defaults:z,onClose:n,onBack:K,recipient:D,onConfirm:W,MainButton:ue.Jy,HeaderBlock:ue.gI,isAnimationProcess:"exiting"===e}),"confirm"===T&&(0,i.jsxs)(C,{onClose:n,onBack:G,recipient:D,assetAmount:o.n.fromRelativeAmount({asset:z.token,amount:z.coinValue}),isMax:z.isMax,children:["exiting"!==e&&B&&(0,i.jsx)(E.tv,{children:(0,i.jsx)(b.JE,{children:(0,i.jsx)(b.O$,{children:(0,i.jsx)(E.NG,{})})})}),"exiting"!==e&&B&&(0,i.jsx)(E.mC,{children:(0,i.jsx)(b.gH,{children:(0,i.jsx)(b.B6,{children:(0,i.jsx)(E.uq,{MainButton:ue.y8})})})})]})]})},T)})})},pe=()=>{const[e,n]=(0,d.useState)(!1),[t,a]=(0,d.useState)(void 0),[o,s]=(0,d.useState)(void 0),{data:r}=(0,y.oJ)(),{mutateAsync:l,reset:c}=(0,M.gW)(),u=(0,f._H)();(0,d.useEffect)((()=>{const e=e=>{c();const{transfer:t,asset:i}=e.params;a(e.params.chain),t?l({address:t.address}).then((e=>{s((0,ue.EB)(t,e,r)),n(!0)})):(s((0,ue.V4)(i,r)),n(!0))};return u.uiEvents.on("transfer",e),()=>{u.uiEvents.off("transfer",e)}}),[r]);const p=(0,d.useCallback)((()=>{s(void 0),n(!1)}),[]),m=(0,d.useCallback)((()=>{if(e)return(0,i.jsx)(de,{onClose:p,chain:t,initAmountState:null===o||void 0===o?void 0:o.initAmountState,initRecipient:null===o||void 0===o?void 0:o.initRecipient})}),[e,o,t]);return(0,i.jsx)(b.P_,{isOpen:e,handleClose:p,hideButton:!0,backShadow:!0,footer:(0,i.jsx)(i.Fragment,{}),children:m})}},8741:(e,n,t)=>{t.d(n,{g:()=>y});var i=t(41235),a=t(58687),o=t(76978),s=t(1849),r=t(2339),l=t(97938),c=t(22550),u=t(56320);t(44819);t(10863);async function d(e){let{tronApi:n,tron:t,recipient:i,amount:a}=e;return new u.An(n).getEstimation({ownerAddress:t.ownerWalletAddress,getEstimationRequest:{lifeTime:Math.floor(Date.now()/1e3)+600,messages:[{to:i.address,value:a.stringWeiAmount,assetAddress:a.asset.address}]}})}async function p(e){let{recipient:n,amount:t,isMax:i,tronApi:a,wallet:r,balances:l}=e;if(i){const e=await async function(e){let{wallet:n,tronApi:t,address:i,amount:a}=e;return(await d({tron:n.tron,tronApi:t,recipient:i,amount:new o.n({asset:a.asset,weiAmount:new c.Z("1")})})).request.fee}({wallet:r,tronApi:a,address:n.address,amount:t});t=new o.n({asset:t.asset,weiAmount:t.weiAmount.minus(e)})}const u=await d({tron:r.tron,tronApi:a,recipient:n.address,amount:t});if(u.internalMsgs.some((e=>!1===e)))throw new Error("Estimation fail.");const p=null===l||void 0===l?void 0:l.balances.find((e=>e.token.address===u.request.feeToken));if(!p)throw new Error("Unexpected feeToken, token's address is ".concat(u.request.feeToken));return{fee:new o.n({asset:(0,s.FZ)(p),weiAmount:u.request.fee}),payload:u}}var m=t(98502),h=t(97957),f=t(49373),x=t(35300),v=t(91153),j=t(87594),w=t(23098),k=t(61945);function y(e,n,t){const{t:c}=(0,k.$)(),u=(0,w._H)(),{api:d}=(0,j.bp)(),y=(0,j.tN)(),b=(0,i.useQueryClient)(),{data:g}=(0,v.oJ)(),{data:V}=(0,x.Ru)();return(0,i.useQuery)([h.S8.estimate,e,n],(async()=>{try{return(0,a.y)(n.asset)?await async function(e){let n,{recipient:t,amount:i,isMax:a,api:c,wallet:u,jettons:d}=e;if(i.asset.id===s.Ct.id)n=await(0,l.xq)(c,u,t,i.weiAmount,a);else{const e=d.balances.find((e=>i.asset.address.toRawString()===e.jetton.address));n=await(0,r.s7)(c,u,t,i,e.walletAddress.address)}return{fee:new o.n({asset:s.Ct,weiAmount:-1*n.event.extra}),payload:n}}({amount:n,api:d,wallet:y,recipient:e,isMax:t,jettons:g}):await p({amount:n,tronApi:d.tronApi,wallet:y,recipient:e,isMax:t,balances:V})}catch(i){throw await(0,m.cB)(b,u,c,i),i}}),{refetchInterval:f.Vg,refetchOnMount:"always"})}},97667:(e,n,t)=>{t.d(n,{N:()=>x});var i=t(41235),a=t(58687),o=t(1849),s=t(2339),r=t(97938),l=t(98502),c=t(86871),u=t(91153),d=t(33455),p=t(87594),m=t(23098),h=t(61945),f=t(8676);function x(e,n,t,x){const{t:v}=(0,h.$)(),j=(0,m._H)(),{api:w}=(0,p.bp)(),k=(0,p.tN)(),y=(0,i.useQueryClient)(),b=(0,d.BJ)(),{data:g}=(0,u.oJ)(),{mutateAsync:V}=(0,f.Ug)();return(0,i.useMutation)((async()=>{const i=await(0,c.TC)(j,k.publicKey,V).catch((()=>null));if(null===i)return!1;try{if(!(0,a.y)(n.asset))throw new Error("Disable trc 20 transactions");if(n.asset.id===o.Ct.id)b("send-ton"),await(0,r.i4)(w,k,e,n,t,x.payload,i);else{b("send-jetton");const t=g.balances.find((e=>n.asset.address.toRawString()===e.jetton.address));await(0,s.kI)(w,k,e,n,t.walletAddress.address,x.payload,i)}}catch(u){await(0,l.cB)(y,j,v,u)}return await y.invalidateQueries({predicate:e=>e.queryKey.includes(k.active.rawAddress)}),!0}))}},4959:(e,n,t)=>{t.d(n,{Z:()=>m});var i=t(9116),a=t(29580);var o=t(61174),s=t(72791),r=t(99172);function l(e,n){var t=Object.create(null);return e&&s.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=function(e){return n&&(0,s.isValidElement)(e)?n(e):e}(e)})),t}function c(e,n,t){return null!=t[n]?t[n]:e.props[n]}function u(e,n,t){var i=l(e.children),a=function(e,n){function t(t){return t in n?n[t]:e[t]}e=e||{},n=n||{};var i,a=Object.create(null),o=[];for(var s in e)s in n?o.length&&(a[s]=o,o=[]):o.push(s);var r={};for(var l in n){if(a[l])for(i=0;i<a[l].length;i++){var c=a[l][i];r[a[l][i]]=t(c)}r[l]=t(l)}for(i=0;i<o.length;i++)r[o[i]]=t(o[i]);return r}(n,i);return Object.keys(a).forEach((function(o){var r=a[o];if((0,s.isValidElement)(r)){var l=o in n,u=o in i,d=n[o],p=(0,s.isValidElement)(d)&&!d.props.in;!u||l&&!p?u||!l||p?u&&l&&(0,s.isValidElement)(d)&&(a[o]=(0,s.cloneElement)(r,{onExited:t.bind(null,r),in:d.props.in,exit:c(r,"exit",e),enter:c(r,"enter",e)})):a[o]=(0,s.cloneElement)(r,{in:!1}):a[o]=(0,s.cloneElement)(r,{onExited:t.bind(null,r),in:!0,exit:c(r,"exit",e),enter:c(r,"enter",e)})}})),a}var d=Object.values||function(e){return Object.keys(e).map((function(n){return e[n]}))},p=function(e){function n(n,t){var i,a=(i=e.call(this,n,t)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i));return i.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},i}(0,o.Z)(n,e);var t=n.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var t,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(t=e,i=o,l(t.children,(function(e){return(0,s.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:c(e,"appear",t),enter:c(e,"enter",t),exit:c(e,"exit",t)})}))):u(e,a,o),firstRender:!1}},t.handleExited=function(e,n){var t=l(this.props.children);e.key in t||(e.props.onExited&&e.props.onExited(n),this.mounted&&this.setState((function(n){var t=(0,a.Z)({},n.children);return delete t[e.key],{children:t}})))},t.render=function(){var e=this.props,n=e.component,t=e.childFactory,a=(0,i.Z)(e,["component","childFactory"]),o=this.state.contextValue,l=d(this.state.children).map(t);return delete a.appear,delete a.enter,delete a.exit,null===n?s.createElement(r.Z.Provider,{value:o},l):s.createElement(r.Z.Provider,{value:o},s.createElement(n,a,l))},n}(s.Component);p.propTypes={},p.defaultProps={component:"div",childFactory:function(e){return e}};const m=p}}]);
//# sourceMappingURL=414.a2350f91.chunk.js.map