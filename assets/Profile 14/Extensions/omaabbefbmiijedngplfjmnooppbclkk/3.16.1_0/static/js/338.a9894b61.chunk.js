"use strict";(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[338],{97541:(e,t,s)=>{s.d(t,{b:()=>X,t:()=>G});var n=s(80184),a=s(72791),r=s(5606),i=s(29857),o=s(34684),d=s(47578),c=s(59598),l=s(14182),m=s(93853),x=s(87594),u=s(61819),j=s(61945),v=s(57443),p=s(26503),h=s(89050);const g=e=>{let{tonTransfer:t,timestamp:s,event:a,isScam:r,status:i}=e;const o=(0,x.tN)(),{data:d}=(0,v.UJ)(l.C.TON),{fiatAmount:u}=(0,v.to)(d,(0,m.og)(t.amount)),j=t.recipient.address===o.active.rawAddress?"received":"send";return(0,n.jsxs)(c.A$,{event:a,children:[(0,n.jsx)(h.I2,{isScam:r,amount:t.amount,symbol:l.C.TON,total:u,timestamp:s,kind:j,status:i}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:["received"===j&&(0,n.jsx)(c.s$,{sender:t.sender}),"send"===j&&(0,n.jsx)(c.$Z,{recipient:t.recipient}),(0,n.jsx)(c.KV,{eventId:a.eventId}),(0,n.jsx)(c.xv,{extra:a.extra}),(0,n.jsx)(h.Az,{comment:r?void 0:t.comment})]})]})},k=e=>{let{action:t,timestamp:s,event:a,isScam:r}=e;const{tonTransfer:i}=t;return i?(0,n.jsx)(g,{tonTransfer:i,event:a,isScam:r,timestamp:s,status:t.status}):(0,n.jsx)(c.LK,{event:a})},f=e=>{var t;let{action:s,timestamp:a,event:r}=e;const{t:i}=(0,j.$)(),{auctionBid:o}=s,d=(0,u.rs)(),{data:x}=(0,v.UJ)(l.C.TON),{fiatAmount:g}=(0,v.to)(x,(0,m.og)(null!==(t=null===o||void 0===o?void 0:o.amount.value)&&void 0!==t?t:0));return o?(0,n.jsxs)(c.A$,{event:r,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Dx,{children:i("transaction_type_bid")}),(0,n.jsxs)(h.$d,{children:[d(o.amount.value)," ",o.amount.tokenName]}),g&&(0,n.jsxs)(h.$d,{children:["\u2248\u2009",g]}),(0,n.jsx)(c.yq,{kind:"send",timestamp:a}),(0,n.jsx)(h.I,{status:s.status})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(c.of,{beneficiary:o.auction}),(0,n.jsx)(c.KV,{eventId:r.eventId}),(0,n.jsx)(c.xv,{extra:r.extra})]})]}):(0,n.jsx)(c.LK,{event:r})},C=e=>{let{action:t,timestamp:s,event:a}=e;const{t:r}=(0,j.$)(),{domainRenew:i,simplePreview:o}=t;return i?(0,n.jsxs)(c.A$,{event:a,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Dx,{children:i.domain}),(0,n.jsx)(c.yq,{kind:"send",timestamp:s}),(0,n.jsx)(h.I,{status:t.status})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(c.s$,{sender:i.renewer,bounced:!0}),(0,n.jsx)(c.KV,{eventId:a.eventId}),(0,n.jsx)(c.xv,{extra:a.extra})]})]}):(0,n.jsx)(c.LK,{event:a})},T=e=>{var t;let{action:s,timestamp:a,event:r}=e;const{smartContractExec:i}=s,o=(0,u.rs)(),{data:d}=(0,v.UJ)(l.C.TON),{fiatAmount:x}=(0,v.to)(d,(0,m.og)(null!==(t=null===i||void 0===i?void 0:i.tonAttached)&&void 0!==t?t:0));return i?(0,n.jsxs)(c.A$,{event:r,children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(c.Dx,{children:["-\u2009",o(i.tonAttached)," ",l.C.TON]}),x&&(0,n.jsxs)(h.$d,{children:["\u2248\u2009",x]}),(0,n.jsx)(c.yq,{kind:"call",timestamp:a}),(0,n.jsx)(h.I,{status:s.status})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(c.$Z,{recipient:i.contract,bounced:!0}),(0,n.jsx)(c.KV,{eventId:r.eventId}),(0,n.jsx)(c.xv,{extra:r.extra}),(0,n.jsx)(h.Zy,{operation:i.operation})]})]}):(0,n.jsx)(c.LK,{event:r})};var w=s(37785),y=s(22967),S=s(8616);const A=e=>{let{depositStake:t,timestamp:s,event:a,status:r}=e;const{t:i}=(0,j.$)(),{data:o}=(0,v.UJ)(l.C.TON),d=(0,u.rs)(),{fiatAmount:x}=(0,v.to)(o,(0,m.og)(t.amount));return(0,n.jsxs)(c.A$,{event:a,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Dx,{children:i("staking_deposit")}),(0,n.jsxs)(h.$d,{children:["-\u2009",d(t.amount)," ",l.C.TON]}),(0,n.jsxs)(h.$d,{children:["\u2248\u2009",x]}),(0,n.jsx)(c.yq,{kind:"send",timestamp:s}),(0,n.jsx)(h.I,{status:r})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(c.gu,{pool:t.pool}),(0,n.jsx)(c.KV,{eventId:a.eventId}),(0,n.jsx)(c.xv,{extra:a.extra})]})]})},I=e=>{let{action:t,timestamp:s,event:a,isScam:r}=e;const{depositStake:i}=t;return i?(0,n.jsx)(A,{depositStake:i,timestamp:s,event:a,isScam:r,status:t.status}):(0,n.jsx)(c.LK,{event:a})},$=e=>{let{withdrawStake:t,timestamp:s,event:a,status:r}=e;const{t:i}=(0,j.$)(),{data:o}=(0,v.UJ)(l.C.TON),d=(0,u.rs)(),{fiatAmount:x}=(0,v.to)(o,(0,m.og)(t.amount));return(0,n.jsxs)(c.A$,{event:a,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Dx,{children:i("staking_withdraw")}),(0,n.jsxs)(h.$d,{children:["+\u2009",d(t.amount)," ",l.C.TON]}),(0,n.jsxs)(h.$d,{children:["\u2248\u2009",x]}),(0,n.jsx)(c.yq,{kind:"send",timestamp:s}),(0,n.jsx)(h.I,{status:r})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(c.gu,{pool:t.pool}),(0,n.jsx)(c.KV,{eventId:a.eventId}),(0,n.jsx)(c.xv,{extra:a.extra})]})]})},R=e=>{let{action:t,timestamp:s,event:a,isScam:r}=e;const{withdrawStake:i}=t;return i?(0,n.jsx)($,{withdrawStake:i,timestamp:s,event:a,isScam:r,status:t.status}):(0,n.jsx)(c.LK,{event:a})},b=e=>{var t;let{withdrawStakeRequest:s,timestamp:a,event:r,status:i}=e;const{t:o}=(0,j.$)(),{data:d}=(0,v.UJ)(l.C.TON),x=(0,u.rs)(),{fiatAmount:g}=(0,v.to)(d,(0,m.og)(null!==(t=s.amount)&&void 0!==t?t:0));return(0,n.jsxs)(c.A$,{event:r,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Dx,{children:o("activityActionModal_withdrawal_request")}),s.amount&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(h.$d,{children:["+\u2009",x(s.amount)," ",l.C.TON]}),(0,n.jsxs)(h.$d,{children:["\u2248\u2009",g]})]}),(0,n.jsx)(c.yq,{kind:"send",timestamp:a}),(0,n.jsx)(h.I,{status:i})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(c.gu,{pool:s.pool}),(0,n.jsx)(c.KV,{eventId:r.eventId}),(0,n.jsx)(c.xv,{extra:r.extra})]})]})},L=e=>{let{action:t,timestamp:s,event:a,isScam:r}=e;const{withdrawStakeRequest:i}=t;return i?(0,n.jsx)(b,{withdrawStakeRequest:i,timestamp:s,event:a,isScam:r,status:t.status}):(0,n.jsx)(c.LK,{event:a})};var N=s(26165);const _=e=>{switch(e.action.type){case"TonTransfer":return(0,n.jsx)(k,{...e});case"NftItemTransfer":return(0,n.jsx)(S.kj,{...e});case"ContractDeploy":return(0,n.jsx)(w._,{...e});case"UnSubscribe":return(0,n.jsx)(N.EA,{...e});case"Subscribe":return(0,n.jsx)(N.G_,{...e});case"AuctionBid":return(0,n.jsx)(f,{...e});case"DomainRenew":return(0,n.jsx)(C,{...e});case"SmartContractExec":return(0,n.jsx)(T,{...e});case"JettonTransfer":return(0,n.jsx)(y.gy,{...e});case"JettonSwap":return(0,n.jsx)(y.XH,{...e});case"JettonMint":return(0,n.jsx)(y.kX,{...e});case"JettonBurn":return(0,n.jsx)(y.q7,{...e});case"DepositStake":return(0,n.jsx)(I,{...e});case"WithdrawStake":return(0,n.jsx)(R,{...e});case"WithdrawStakeRequest":return(0,n.jsx)(L,{...e});case"NftPurchase":return(0,n.jsx)(S.q6,{...e});case"Unknown":return(0,n.jsx)(c.LK,{event:e.event});default:return console.log(e),(0,n.jsx)(c.LK,{event:e.event,children:e.action.type})}},K=e=>{let{value:t,handleClose:s}=e;const r=(0,a.useCallback)((()=>{if(t)return(0,n.jsx)(_,{isScam:t.isScam,action:t.action,timestamp:t.timestamp,event:t.event})}),[t,s]);return(0,n.jsx)(d.P_,{isOpen:!!t,handleClose:s,children:r})};var q=s(49376);const D=e=>{let{sendTRC20:t,timestamp:s,event:r}=e;const i=(0,a.useMemo)((()=>(0,m.og)(t.amount,t.token.decimals)),[t]),{data:o}=(0,v.UJ)(t.token.symbol),{fiatAmount:d}=(0,v.to)(o,i);return(0,n.jsxs)(c.Tq,{event:r,children:[(0,n.jsx)(h.I2,{amount:t.amount,decimals:t.token.decimals,symbol:t.token.symbol,total:d,timestamp:s,kind:"send"}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(c.jQ,{address:t.recipient}),(0,n.jsx)(c.KV,{eventId:r.txHash}),r.fees&&(0,n.jsx)(c.Z7,{fees:r.fees})]})]})},O=e=>{let{action:t,timestamp:s,event:a}=e;const{sendTRC20:r}=t;return r?(0,n.jsx)(D,{sendTRC20:r,event:a,timestamp:s}):(0,n.jsx)(c.tT,{event:a})},W=e=>{let{receiveTRC20:t,timestamp:s,event:r}=e;const i=(0,a.useMemo)((()=>(0,m.og)(t.amount,t.token.decimals)),[t]),{data:o}=(0,v.UJ)(t.token.symbol),{fiatAmount:d}=(0,v.to)(o,i);return(0,n.jsxs)(c.Tq,{event:r,children:[(0,n.jsx)(h.I2,{amount:t.amount,decimals:t.token.decimals,symbol:t.token.symbol,total:d,timestamp:s,kind:"received"}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(c.Lx,{address:t.sender}),(0,n.jsx)(c.KV,{eventId:r.txHash})]})]})},E=e=>{let{action:t,timestamp:s,event:a}=e;const{receiveTRC20:r}=t;return r?(0,n.jsx)(W,{receiveTRC20:r,event:a,timestamp:s}):(0,n.jsx)(c.tT,{event:a})},J=e=>{let{action:t,timestamp:s,event:a}=e;const{t:r}=(0,j.$)(),{contractDeploy:i}=t;return i?(0,n.jsxs)(c.Tq,{event:a,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Dx,{children:r("transaction_type_wallet_initialized")}),(0,n.jsx)(c.yq,{kind:"send",timestamp:s})]}),(0,n.jsxs)(p.L8,{margin:!1,fullWidth:!0,children:[(0,n.jsx)(c.kR,{address:i.ownerAddress}),(0,n.jsx)(c.KV,{eventId:a.txHash}),a.fees&&(0,n.jsx)(c.Z7,{fees:a.fees})]})]}):(0,n.jsx)(c.tT,{event:a})},P=e=>{switch(e.action.type){case"ReceiveTRC20":return(0,n.jsx)(E,{...e});case"SendTRC20":return(0,n.jsx)(O,{...e});case"ContractDeploy":return(0,n.jsx)(J,{...e});default:return console.log(e),(0,n.jsx)(c.tT,{event:e.event,children:e.action.type})}},H=e=>{let{value:t,handleClose:s}=e;const r=(0,a.useCallback)((()=>{if(t)return(0,n.jsx)(P,{action:t.action,timestamp:t.timestamp,event:t.event})}),[t,s]);return(0,n.jsx)(d.P_,{isOpen:!!t,handleClose:s,children:r})};var U=s(20220),V=s(94607),F=s(1715);const M=e=>{let{receiveTRC20:t,date:s}=e;const a=(0,u.rs)();return(0,n.jsx)(V.pA,{amount:a(t.amount,t.token.decimals),symbol:t.token.symbol,sender:(0,U.FN)(t.sender),date:s})},Z=e=>{let{sendTRC20:t,date:s}=e;const a=(0,u.rs)();return(0,n.jsx)(V.yp,{amount:a(t.amount,t.token.decimals),symbol:t.token.symbol,recipient:(0,U.FN)(t.recipient),date:s})},B=e=>{let{contractDeploy:t,date:s}=e;return(0,n.jsx)(V.Cf,{address:(0,U.FN)(t.ownerAddress),date:s})},Q=e=>{let{action:t,date:s}=e;const{t:a}=(0,j.$)();return t.receiveTRC20?(0,n.jsx)(M,{receiveTRC20:t.receiveTRC20,date:s}):t.sendTRC20?(0,n.jsx)(Z,{sendTRC20:t.sendTRC20,date:s}):t.contractDeploy?(0,n.jsx)(B,{contractDeploy:t.contractDeploy,date:s}):(console.log(t),(0,n.jsx)(F._X,{children:a("txActions_signRaw_types_unknownTransaction")}))},z=e=>{let{event:t,date:s,timestamp:a,setTronAction:r}=e;return(0,n.jsx)(n.Fragment,{children:t.actions.map(((e,i)=>(0,n.jsxs)(p.HC,{onClick:()=>r({action:e,timestamp:a,event:t}),children:[(0,n.jsx)(Q,{action:e,date:s}),t.inProgress&&(0,n.jsx)(o.QO,{})]},i)))})},X=e=>{let{isFetched:t,isFetchingNextPage:s,tonEvents:o,tronEvents:d}=e;const c=(0,a.useMemo)((()=>(0,r.Q)(o,d)),[o,d]);return t?(0,n.jsxs)(i.YB,{children:[(0,n.jsx)(G,{items:c}),s&&(0,n.jsx)(i.eM,{size:3})]}):(0,n.jsx)(i.ZC,{})},G=e=>{let{items:t}=e;const[s,r]=(0,a.useState)(void 0),[i,d]=(0,a.useState)(void 0);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.GE,{groups:t,RenderItem:e=>{let{event:t,date:s,timestamp:a}=e;return"tron"===t.kind?(0,n.jsx)(z,{event:t.event,date:s,timestamp:a,setTronAction:d}):"ton"===t.kind?(0,n.jsx)(q.W,{event:t.event,date:s,timestamp:a,setActivity:r}):(0,n.jsx)(n.Fragment,{})}}),(0,n.jsx)(K,{value:s,handleClose:()=>r(void 0)}),(0,n.jsx)(H,{value:i,handleClose:()=>d(void 0)})]})}},71757:(e,t,s)=>{s.d(t,{N:()=>r});var n=s(20220),a=s(72791);const r=(e,t,s,r,i)=>{(0,a.useEffect)((()=>{if(!e)return;const a=r?null===i||void 0===i?void 0:i.current:window;if(!a)return;const o=(0,n.P2)((()=>{if(!t&&"is-locked"!==document.documentElement.className)if(a===window)window.innerHeight+window.scrollY>=document.body.offsetHeight-500&&s();else{const e=a;e.scrollTop>=e.scrollHeight-window.innerHeight-500&&s()}}),50);return a.addEventListener("scroll",o),o(),()=>{a.removeEventListener("scroll",o)}}),[e,r,i])}},5606:(e,t,s)=>{s.d(t,{Q:()=>a});var n=s(12827);const a=(e,t)=>(0,n.L2)(((e,t)=>{const s=[];if(e&&e.pages.forEach((e=>{const t=e.events.map((e=>({timestamp:1e3*e.timestamp,key:e.eventId,event:{kind:"ton",event:e}})));s.push(...t)})),t){const n=((e,t)=>{if(!e||!e.pages.length)return t;if(e.pageParams.length){const s=e.pageParams[e.pageParams.length-1];if(void 0===s||0===s)return t}const{events:s}=e.pages[e.pages.length-1];if(!s.length)return t;const n=1e3*s[s.length-1].timestamp;return{pageParams:t.pageParams,pages:t.pages.map((e=>({...e,events:e.events.filter((e=>e.timestamp>n))})))}})(e,t);n.pages.forEach((e=>{const t=e.events.map((e=>({timestamp:e.timestamp,key:"".concat(e.txHash,"-").concat(e.actions.map((e=>e.type)).join("-")),event:{kind:"tron",event:e}})));s.push(...t)}))}return s})(e,t))}}]);
//# sourceMappingURL=338.a9894b61.chunk.js.map