"use strict";(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[414],{58687:(e,n,t)=>{t.d(n,{y:()=>a});var i=t(14182);function a(e){return e.blockchain===i.S.TON}},80414:(e,n,t)=>{t.r(n),t.d(n,{default:()=>pe});var i=t(80184),a=t(14182),o=t(76978),s=t(1849),r=t(48544),l=t(18203),c=t(93853),u=t(34692),d=t(72791),p=t(4959),m=t(73485),h=t(87594),f=t(23098),x=t(42770),v=t(61945),j=t(82430),w=t(7393),k=t(35300),y=t(47578),b=t(8741),g=t(97667),V=t(38705);const E=e=>{let{isMax:n,...t}=e;const a=(0,b.g)(t.recipient,t.assetAmount,n),o=(0,g.N)(t.recipient,t.assetAmount,n,a.data);return(0,i.jsx)(V.vp,{estimation:a,...o,...t})};var R,C=t(86749),M=t(144),A=t(61819),S=t(87812),_=t(57443),Z=t(91153),O=t(73643),F=t(47712),N=t(30168),B=t(65867);const T=B.ZP.input(R||(R=(0,N.Z)(["\n    padding: 0;\n    margin: 0;\n    border: none;\n    outline: none;\n    /* added styles */\n    font-family: inherit;\n    font-size: inherit;\n    background: transparent;\n    color: ",";\n\n    font-family: 'Montserrat', sans-serif;\n    font-style: normal;\n    font-weight: 600;\n\n    line-height: 49px;\n    text-align: right;\n\n    -moz-appearance: textfield;\n\n    &::-webkit-outer-spin-button,\n    &::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n    }\n"])),(e=>e.theme.textPrimary)),P=d.forwardRef(((e,n)=>{let{value:t,setValue:a,inputSize:o}=e;return(0,i.jsx)(T,{autoComplete:"off",id:"sentence",ref:n,style:{fontSize:"".concat(o.size,"px"),width:"".concat(o.width,"px")},inputMode:"decimal",type:"text",value:t,onChange:e=>{a(e.target.value)}})}));P.displayName="Sentence";var L,D,z,H,q,U,J=t(12850),$=t(79309),I=t(5784),Q=t(26503);const W=B.ZP.div(L||(L=(0,N.Z)(["\n    background: ",";\n    border-radius: ",";\n    padding: 0.5rem 1rem;\n    display: flex;\n    gap: 0.5rem;\n"])),(e=>e.theme.buttonTertiaryBackground),(e=>e.theme.cornerMedium)),K=B.ZP.span(D||(D=(0,N.Z)(["\n    color: ",";\n    display: flex;\n    align-items: center;\n"])),(e=>e.theme.iconSecondary)),G=B.ZP.img(z||(z=(0,N.Z)(["\n    border-radius: ",";\n    width: 24px;\n    height: 24px;\n"])),(e=>e.theme.cornerFull)),X=B.ZP.div(H||(H=(0,N.Z)(["\n    display: flex;\n    gap: 0.5rem;\n    width: 200px;\n    overflow: hidden;\n"]))),Y=(0,B.ZP)(F.mI)(q||(q=(0,N.Z)(["\n    color: ",";\n    text-overflow: ellipsis;\n    overflow: hidden;\n"])),(e=>e.theme.textSecondary)),ee=B.ZP.span(U||(U=(0,N.Z)(["\n    padding-left: 0.5rem;\n    color: ",";\n    display: flex;\n"])),(e=>e.theme.accentBlue)),ne=e=>{var n;let{onClose:t,jetton:o,jettons:s,setJetton:r,info:l}=e;const c=(0,A.rs)(),u=(0,d.useRef)(null);return(0,d.useEffect)((()=>{var e;u.current&&(null===(e=u.current.parentElement)||void 0===e||null===(e=e.parentElement)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[u]),(0,i.jsxs)(Q.L8,{margin:!1,dropDown:!0,children:[(0,i.jsx)(Q.HC,{dropDown:!0,onClick:()=>{r(a.C.TON),t()},children:(0,i.jsxs)(Q.me,{children:[(0,i.jsxs)(X,{children:[(0,i.jsx)(G,{src:"https://wallet.tonkeeper.com/img/toncoin.svg"}),(0,i.jsx)(F.RV,{children:a.C.TON}),(0,i.jsx)(Y,{children:c(null!==(n=null===l||void 0===l?void 0:l.balance)&&void 0!==n?n:0)})]}),a.C.TON===o?(0,i.jsx)(ee,{children:(0,i.jsx)(I.qw,{})}):void 0]})}),s.balances.map((e=>(0,i.jsx)(Q.HC,{dropDown:!0,onClick:()=>{r(e.jetton.address),t()},children:(0,i.jsxs)(Q.me,{children:[(0,i.jsxs)(X,{children:[(0,i.jsx)(G,{src:e.jetton.image}),(0,i.jsx)(F.RV,{children:e.jetton.symbol}),(0,i.jsx)(Y,{children:c(e.balance,e.jetton.decimals)})]}),e.jetton.address===o?(0,i.jsx)(ee,{ref:u,children:(0,i.jsx)(I.qw,{})}):void 0]})},e.jetton.address)))]})},te=e=>{let{jetton:n,jettons:t,setJetton:a,info:o}=e;return(0,i.jsx)($.vb,{center:!0,payload:e=>(0,i.jsx)(ne,{info:o,onClose:e,jetton:n,jettons:t,setJetton:a}),children:(0,i.jsxs)(W,{children:[(0,i.jsx)(F.RV,{children:(0,M.TB)(n,t)}),(0,i.jsx)(K,{children:(0,i.jsx)(I.KL,{})})]})})};var ie=t(81987);const ae=(e,n)=>{const{ios:t,standalone:i}=(0,h.bp)();(0,d.useEffect)((()=>{if(!t)return;const a=window.innerHeight;function o(){const t=e.current;if(!t)return;const o=a-this.height+16,s=i?Math.max(32,o):o;t.style.bottom="".concat(s,"px");const r=Math.min(this.height-16-56-16-36-16-16-16-16-37,272);n.current&&(n.current.style.height="".concat(r,"px"))}const s=window.visualViewport;return s&&(setTimeout((()=>o.call(s)),300),s.addEventListener("resize",o)),()=>{!function(){const n=window.visualViewport;n&&n.removeEventListener("resize",o),setTimeout((()=>{const n=e.current;n&&(n.style.bottom=null)}))}()}}),[e.current,n.current])},oe={size:40,width:30};var se=t(27494);function re(e){return e.toFormat({groupSeparator:(0,se.ce)(),decimalSeparator:(0,se.Yz)()})}const le=(e,n)=>{const{kind:t,payload:i}=n;switch(t){case"select":return{inputValue:"0",coinValue:new u.Z(0),token:i.token,inFiat:!1,isMax:!1};case"max":if(void 0!==i.prices){const n=i.value.multipliedBy(i.prices).decimalPlaces(2,u.Z.ROUND_FLOOR);return{...e,inputValue:re(e.inFiat?n:i.value),fiatValue:n,coinValue:i.value,isMax:!e.isMax}}return{...e,inputValue:re(i.value),coinValue:i.value,isMax:!e.isMax};case"input":{var a,o;const n=e.inFiat?2:e.token.decimals;let t=(0,J.VI)(i.value);(0,J.vu)(t,n)||(t=e.inputValue),(0,M.kE)(t)&&(t=(0,M.z6)(t));const s=(0,J.NU)(t),r=e.inFiat?s.div(null!==(a=i.prices)&&void 0!==a?a:0):s,l=e.inFiat?s:s.multipliedBy(null!==(o=i.prices)&&void 0!==o?o:0);return{...e,inputValue:t,coinValue:r,fiatValue:l,isMax:!1}}case"price":{if(!i.prices)return e;const n=e.coinValue.multipliedBy(i.prices).decimalPlaces(2,u.Z.ROUND_FLOOR);return{...e,fiatValue:n}}case"toggle":{var s,r;const n=re(e.inFiat?e.coinValue.decimalPlaces(e.token.decimals,u.Z.ROUND_FLOOR):null!==(s=null===(r=e.fiatValue)||void 0===r?void 0:r.decimalPlaces(2,u.Z.ROUND_FLOOR))&&void 0!==s?s:new u.Z(0));return{...e,inputValue:n,inFiat:!e.inFiat}}default:return e}},ce=e=>{let{recipient:n,onClose:t,onBack:o,onConfirm:l,defaults:c,MainButton:p,HeaderBlock:m,isAnimationProcess:x}=e;const{t:k}=(0,v.$)(),b=(0,f._H)(),{standalone:g,fiat:V}=(0,h.bp)(),E=n.address.blockchain,R=(0,j.c)()&&x,{data:C}=(0,w.NR)(),{data:N}=(0,Z.IR)(),[B,T]=(0,d.useReducer)(le,((e,n)=>{var t,i,o,r;const l=null!==(t=null===e||void 0===e?void 0:e.inFiat)&&void 0!==t&&t;return{inputValue:null!==(i=null===e||void 0===e?void 0:e.inputValue)&&void 0!==i?i:re((l?null===e||void 0===e?void 0:e.fiatValue:null===e||void 0===e?void 0:e.coinValue)||new u.Z(0)),coinValue:null!==(o=null===e||void 0===e?void 0:e.coinValue)&&void 0!==o?o:new u.Z(0),fiatValue:null===e||void 0===e?void 0:e.fiatValue,token:(null===e||void 0===e?void 0:e.token)||(n===a.S.TON?s.Ct:s.tr),inFiat:l,isMax:null!==(r=null===e||void 0===e?void 0:e.isMax)&&void 0!==r&&r}})(c,E)),{data:L,isLoading:D}=(0,_.UJ)((e=>e.token.blockchain===a.S.TRON?e.token.symbol:(0,r.mi)(e.token,{userFriendly:!0}))(B)),{data:z,isLoading:H}=(0,S.t6)(B.token),q=(0,d.useRef)(null),U=(0,d.useRef)(null),$=(0,d.useRef)(null);ae($,U),((e,n)=>{(0,d.useEffect)((()=>{const n=setTimeout((()=>{e.current&&e.current.focus()}),300);return()=>{clearTimeout(n)}}),[e.current,n])})(q,B.token);const[I,Q]=(0,d.useState)(oe);(0,d.useLayoutEffect)((()=>{U.current&&Q(((e,n)=>{const t=n.clientWidth;let i=oe.size,a=(0,ie.m)(e,"600 ".concat(i,"px 'Montserrat'"));for(;Math.round(a)>t-115;)i=Math.max(1,i-1),a=(0,ie.m)(e,"600 ".concat(i,"px 'Montserrat'"));return{width:Math.max(Math.round(a)+5,6*e.length,30),size:i}})(B.inputValue,U.current))}),[U.current,B.inputValue]),(0,d.useEffect)((()=>{T({kind:"price",payload:{prices:null===L||void 0===L?void 0:L.prices}})}),[T,L]);const W=(0,d.useCallback)((()=>{T({kind:"toggle",payload:void 0})}),[]),K=(0,d.useCallback)((e=>{T({kind:"input",payload:{value:e,prices:null===L||void 0===L?void 0:L.prices}})}),[T,L]),G=(0,d.useCallback)((()=>{T({kind:"max",payload:{value:z.relativeAmount,prices:null===L||void 0===L?void 0:L.prices}})}),[T,z,L]),X=(0,d.useCallback)((e=>{C&&T({kind:"select",payload:{token:(0,r.Px)(e,C)}})}),[T,C]),Y=z.relativeAmount.minus(B.coinValue),ee=Y.gte(0),ne=(0,d.useMemo)((()=>ee&&(0,M.kE)(B.inputValue)&&(0,J.NU)(B.inputValue).isGreaterThan(0)),[ee,B.inputValue]),se=(0,d.useCallback)((()=>{o(B)}),[o,B]),ce=(0,d.useCallback)((()=>{ne?l(B):b.hapticNotification("error")}),[ne,l,B,b]);return(0,i.jsxs)(y.r4,{onSubmit:async e=>{e.stopPropagation(),e.preventDefault(),ce()},standalone:g,children:[!R&&(0,i.jsx)(y.JE,{children:(0,i.jsx)(y.O$,{children:(0,i.jsx)(m,{onClose:t,onBack:se,children:(0,i.jsxs)(J.DK,{children:[k("send_screen_steps_done_to").replace("%{name}",""),(0,i.jsx)(J.XT,{recipient:n}),(0,i.jsx)(J.b9,{recipient:n})]})})})}),(0,i.jsxs)(J.wU,{ref:U,children:[(0,i.jsx)(J.je,{children:E===a.S.TON?(0,i.jsx)(te,{info:N,jetton:(0,r.mi)(B.token),setJetton:X,jettons:null!==C&&void 0!==C?C:{balances:[]}}):(0,i.jsx)(J.bx,{children:(0,i.jsx)(F.RV,{children:"TRC20"})})}),(0,i.jsxs)(J.S7,{children:[(0,i.jsx)(P,{ref:q,value:B.inputValue,setValue:K,inputSize:I}),(0,i.jsx)(J.mN,{children:B.inFiat?V:B.token.symbol})]}),(0,i.jsx)(J.t$,{amountState:B,toggleFiat:W})]}),(0,i.jsxs)(J.X$,{children:[(0,i.jsx)(J.ER,{maxValue:B.isMax,onClick:G,children:k("send_screen_steps_amount_max")}),ee?(0,i.jsxs)(J.JD,{children:[k("send_screen_steps_amount_remaining").replace("%{amount}",A.zW.format(Y,{decimals:B.token.decimals}))," ",B.token.symbol]}):(0,i.jsx)(J.rL,{children:k("send_screen_steps_amount_insufficient_balance")})]}),(0,i.jsx)(O.Zv,{}),!R&&(0,i.jsx)(y.gH,{children:(0,i.jsx)(y.B6,{children:(0,i.jsx)(p,{ref:$,isDisabled:!ne,isLoading:D||H,onClick:ce})})})]})};var ue=t(98502);const de=e=>{let{onClose:n,chain:t,initRecipient:b,initAmountState:g}=e;const R=(0,f._H)(),{standalone:M,ios:A,extension:S}=(0,h.bp)(),{t:_}=(0,v.$)(),{data:Z}=(0,w.NR)(),O=(0,j.c)(),[F,N]=(0,d.useState)("recipient"),[B,T]=(0,d.useState)(!0),[P,L]=(0,d.useState)(b),[D,z]=(0,d.useState)(g),{data:H}=(0,k.Ru)(),{mutateAsync:q,isLoading:U}=(0,C.gW)(),J=e=>{var n,t;null!==D&&void 0!==D&&null!==(n=D.token)&&void 0!==n&&n.blockchain&&(null===D||void 0===D||null===(t=D.token)||void 0===t?void 0:t.blockchain)!==e.address.blockchain&&z(void 0),L(e),H&&e.address.blockchain===a.S.TRON&&z({token:(0,s.FZ)(H.balances[0])})},$=e=>{T(!0),J(e),N("amount")},I=e=>{T(!0),z(e),N("confirm")},Q=e=>{T(!1),z(e),N("recipient")},W=()=>{A&&(0,x.Q)("decimal"),T(!1),N("amount")},K=(0,d.useCallback)((async e=>{let{amount:n,jetton:t}=e;if(t&&Z){let e;try{e=(0,r.Px)(t,Z)}catch(i){return R.uiEvents.emit("copy",{method:"copy",params:_("Unexpected_QR_Code")}),!1}const a=new o.n({asset:e,weiAmount:n||"0"});z({coinValue:a.relativeAmount,token:e,inFiat:!1,isMax:!1})}else z({coinValue:n?(0,c.PE)(n):new u.Z("0"),token:null===g||void 0===g?void 0:g.token,inFiat:!1,isMax:!1});return!0}),[R,Z,null===g||void 0===g?void 0:g.token]),G=async e=>{const n=(0,l.M)({url:e});if(!n)return R.uiEvents.emit("copy",{method:"copy",params:_("Unexpected_QR_Code")});await K(n)&&await(async e=>{let{address:n,text:t}=e;const i={address:n,blockchain:a.S.TON},o=await q(i),s=!o.memoRequired||!(!o.memoRequired||!t);J({address:i,toAccount:o,comment:null!==t&&void 0!==t?t:"",done:s}),s&&N("amount")})(n)},X={recipient:(0,d.useRef)(null),amount:(0,d.useRef)(null),confirm:(0,d.useRef)(null)}[F];return(0,i.jsx)(ue.im,{standalone:M,extension:S,children:(0,i.jsx)(p.Z,{childFactory:(0,ue.mH)(B),children:(0,i.jsx)(m.Z,{nodeRef:X,classNames:"right-to-left",addEndListener:e=>{setTimeout(e,ue.x9)},children:e=>(0,i.jsxs)("div",{ref:X,children:["recipient"===F&&(0,i.jsx)(C.Aq,{data:P,setRecipient:$,onScan:G,keyboard:"decimal",isExternalLoading:U,acceptBlockchains:t?[t]:void 0,MainButton:ue.c7,HeaderBlock:()=>(0,i.jsx)(ue.ap,{title:_("transaction_recipient"),onClose:n}),isAnimationProcess:"exiting"===e}),"amount"===F&&(0,i.jsx)(ce,{defaults:D,onClose:n,onBack:Q,recipient:P,onConfirm:I,MainButton:ue.Jy,HeaderBlock:ue.gI,isAnimationProcess:"exiting"===e}),"confirm"===F&&(0,i.jsxs)(E,{onClose:n,onBack:W,recipient:P,assetAmount:o.n.fromRelativeAmount({asset:D.token,amount:D.coinValue}),isMax:D.isMax,children:["exiting"!==e&&O&&(0,i.jsx)(V.tv,{children:(0,i.jsx)(y.JE,{children:(0,i.jsx)(y.O$,{children:(0,i.jsx)(V.NG,{})})})}),"exiting"!==e&&O&&(0,i.jsx)(V.mC,{children:(0,i.jsx)(y.gH,{children:(0,i.jsx)(y.B6,{children:(0,i.jsx)(V.uq,{MainButton:ue.y8})})})})]})]})},F)})})},pe=()=>{const[e,n]=(0,d.useState)(!1),[t,a]=(0,d.useState)(void 0),[o,s]=(0,d.useState)(void 0),{data:r}=(0,w.NR)(),{mutateAsync:l,reset:c}=(0,C.gW)(),u=(0,f._H)();(0,d.useEffect)((()=>{const e=e=>{c();const{transfer:t,asset:i}=e.params;a(e.params.chain),t?l({address:t.address}).then((e=>{s((0,ue.EB)(t,e,r)),n(!0)})):(s((0,ue.V4)(i,r)),n(!0))};return u.uiEvents.on("transfer",e),()=>{u.uiEvents.off("transfer",e)}}),[r]);const p=(0,d.useCallback)((()=>{s(void 0),n(!1)}),[]),m=(0,d.useCallback)((()=>{if(e)return(0,i.jsx)(de,{onClose:p,chain:t,initAmountState:null===o||void 0===o?void 0:o.initAmountState,initRecipient:null===o||void 0===o?void 0:o.initRecipient})}),[e,o,t]);return(0,i.jsx)(y.P_,{isOpen:e,handleClose:p,hideButton:!0,backShadow:!0,footer:(0,i.jsx)(i.Fragment,{}),children:m})}},8741:(e,n,t)=>{t.d(n,{g:()=>y});var i=t(41235),a=t(58687),o=t(76978),s=t(1849),r=t(2339),l=t(97938),c=t(22550),u=t(56320);t(44819);t(99207);async function d(e){let{tronApi:n,tron:t,recipient:i,amount:a}=e;return new u.An(n).getEstimation({ownerAddress:t.ownerWalletAddress,getEstimationRequest:{lifeTime:Math.floor(Date.now()/1e3)+600,messages:[{to:i.address,value:a.stringWeiAmount,assetAddress:a.asset.address}]}})}async function p(e){let{recipient:n,amount:t,isMax:i,tronApi:a,wallet:r,balances:l}=e;if(i){const e=await async function(e){let{wallet:n,tronApi:t,address:i,amount:a}=e;return(await d({tron:n.tron,tronApi:t,recipient:i,amount:new o.n({asset:a.asset,weiAmount:new c.Z("1")})})).request.fee}({wallet:r,tronApi:a,address:n.address,amount:t});t=new o.n({asset:t.asset,weiAmount:t.weiAmount.minus(e)})}const u=await d({tron:r.tron,tronApi:a,recipient:n.address,amount:t});if(u.internalMsgs.some((e=>!1===e)))throw new Error("Estimation fail.");const p=null===l||void 0===l?void 0:l.balances.find((e=>e.token.address===u.request.feeToken));if(!p)throw new Error("Unexpected feeToken, token's address is ".concat(u.request.feeToken));return{fee:new o.n({asset:(0,s.FZ)(p),weiAmount:u.request.fee}),payload:u}}var m=t(98502),h=t(97957),f=t(7393),x=t(49373),v=t(35300),j=t(87594),w=t(23098),k=t(61945);function y(e,n,t){const{t:c}=(0,k.$)(),u=(0,w._H)(),{api:d}=(0,j.bp)(),y=(0,j.tN)(),b=(0,i.useQueryClient)(),{data:g}=(0,f.NR)(),{data:V}=(0,v.Ru)();return(0,i.useQuery)([h.S8.estimate,e,n],(async()=>{try{return(0,a.y)(n.asset)?await async function(e){let n,{recipient:t,amount:i,isMax:a,api:c,wallet:u,jettons:d}=e;if(i.asset.id===s.Ct.id)n=await(0,l.xq)(c,u,t,i.weiAmount,a);else{const e=d.balances.find((e=>i.asset.address.toRawString()===e.jetton.address));n=await(0,r.s7)(c,u,t,i,e.walletAddress.address)}return{fee:new o.n({asset:s.Ct,weiAmount:-1*n.event.extra}),payload:n}}({amount:n,api:d,wallet:y,recipient:e,isMax:t,jettons:g}):await p({amount:n,tronApi:d.tronApi,wallet:y,recipient:e,isMax:t,balances:V})}catch(i){throw await(0,m.cB)(b,u,c,i),i}}),{refetchInterval:x.Vg,refetchOnMount:"always"})}},97667:(e,n,t)=>{t.d(n,{N:()=>x});var i=t(41235),a=t(58687),o=t(1849),s=t(2339),r=t(97938),l=t(98502),c=t(7393),u=t(86871),d=t(8676),p=t(33455),m=t(87594),h=t(23098),f=t(61945);function x(e,n,t,x){const{t:v}=(0,f.$)(),j=(0,h._H)(),{api:w}=(0,m.bp)(),k=(0,m.tN)(),y=(0,i.useQueryClient)(),b=(0,p.BJ)(),{data:g}=(0,c.NR)(),{mutateAsync:V}=(0,d.Ug)();return(0,i.useMutation)((async()=>{const i=await(0,u.TC)(j,k.publicKey,V).catch((()=>null));if(null===i)return!1;try{if(!(0,a.y)(n.asset))throw new Error("Disable trc 20 transactions");if(n.asset.id===o.Ct.id)b("send-ton"),await(0,r.i4)(w,k,e,n,t,x.payload,i);else{b("send-jetton");const t=g.balances.find((e=>n.asset.address.toRawString()===e.jetton.address));await(0,s.kI)(w,k,e,n,t.walletAddress.address,x.payload,i)}}catch(c){await(0,l.cB)(y,j,v,c)}return await y.invalidateQueries({predicate:e=>e.queryKey.includes(k.active.rawAddress)}),!0}))}},4959:(e,n,t)=>{t.d(n,{Z:()=>m});var i=t(9116),a=t(29580);var o=t(61174),s=t(72791),r=t(99172);function l(e,n){var t=Object.create(null);return e&&s.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=function(e){return n&&(0,s.isValidElement)(e)?n(e):e}(e)})),t}function c(e,n,t){return null!=t[n]?t[n]:e.props[n]}function u(e,n,t){var i=l(e.children),a=function(e,n){function t(t){return t in n?n[t]:e[t]}e=e||{},n=n||{};var i,a=Object.create(null),o=[];for(var s in e)s in n?o.length&&(a[s]=o,o=[]):o.push(s);var r={};for(var l in n){if(a[l])for(i=0;i<a[l].length;i++){var c=a[l][i];r[a[l][i]]=t(c)}r[l]=t(l)}for(i=0;i<o.length;i++)r[o[i]]=t(o[i]);return r}(n,i);return Object.keys(a).forEach((function(o){var r=a[o];if((0,s.isValidElement)(r)){var l=o in n,u=o in i,d=n[o],p=(0,s.isValidElement)(d)&&!d.props.in;!u||l&&!p?u||!l||p?u&&l&&(0,s.isValidElement)(d)&&(a[o]=(0,s.cloneElement)(r,{onExited:t.bind(null,r),in:d.props.in,exit:c(r,"exit",e),enter:c(r,"enter",e)})):a[o]=(0,s.cloneElement)(r,{in:!1}):a[o]=(0,s.cloneElement)(r,{onExited:t.bind(null,r),in:!0,exit:c(r,"exit",e),enter:c(r,"enter",e)})}})),a}var d=Object.values||function(e){return Object.keys(e).map((function(n){return e[n]}))},p=function(e){function n(n,t){var i,a=(i=e.call(this,n,t)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i));return i.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},i}(0,o.Z)(n,e);var t=n.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var t,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(t=e,i=o,l(t.children,(function(e){return(0,s.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:c(e,"appear",t),enter:c(e,"enter",t),exit:c(e,"exit",t)})}))):u(e,a,o),firstRender:!1}},t.handleExited=function(e,n){var t=l(this.props.children);e.key in t||(e.props.onExited&&e.props.onExited(n),this.mounted&&this.setState((function(n){var t=(0,a.Z)({},n.children);return delete t[e.key],{children:t}})))},t.render=function(){var e=this.props,n=e.component,t=e.childFactory,a=(0,i.Z)(e,["component","childFactory"]),o=this.state.contextValue,l=d(this.state.children).map(t);return delete a.appear,delete a.enter,delete a.exit,null===n?s.createElement(r.Z.Provider,{value:o},l):s.createElement(r.Z.Provider,{value:o},s.createElement(n,a,l))},n}(s.Component);p.propTypes={},p.defaultProps={component:"div",childFactory:function(e){return e}};const m=p}}]);
//# sourceMappingURL=414.523803b0.chunk.js.map