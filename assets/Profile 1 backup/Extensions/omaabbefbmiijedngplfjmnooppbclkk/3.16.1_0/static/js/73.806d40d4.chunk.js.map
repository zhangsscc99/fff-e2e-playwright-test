{"version":3,"file":"static/js/73.806d40d4.chunk.js","mappings":"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","sources":["../../../packages/uikit/dist/hooks/useEventListener.js","../../../packages/uikit/dist/hooks/useAreaClick.js","../../../packages/core/dist/service/urlService.js","../../../packages/uikit/dist/hooks/useResizeObserver.js","../../../packages/uikit/dist/hooks/useIsMounted.js","../../../packages/uikit/dist/pages/browser/CategoryBlock.js","../../../packages/uikit/dist/hooks/browser/useRecommendations.js","../../../packages/uikit/dist/pages/browser/CategoryPage.js","../../../packages/uikit/dist/components/browser/PromotionsCarousel.js","../../../packages/uikit/dist/pages/browser/BrowserRecommendationsPage.js","../../../packages/uikit/dist/hooks/useElementSize.js","../../../packages/uikit/dist/pages/browser/index.js"],"sourcesContent":["import { useEffect, useLayoutEffect, useRef } from 'react';\nfunction useEventListener(eventName, handler, element, options) {\n    const savedHandler = useRef(handler);\n    useLayoutEffect(() => {\n        savedHandler.current = handler;\n    }, [handler]);\n    useEffect(() => {\n        const targetElement = element?.current ?? window;\n        if (!(targetElement && targetElement.addEventListener))\n            return;\n        const listener = event => savedHandler.current(event);\n        targetElement.addEventListener(eventName, listener, options);\n        return () => {\n            targetElement.removeEventListener(eventName, listener, options);\n        };\n    }, [eventName, element, options]);\n}\nexport { useEventListener };\n","import { formatBrowserUrl } from '@tonkeeper/core/dist/service/urlService';\nimport { useCallback, useRef } from 'react';\nimport { useClickBrowser } from './amplitude';\nimport { useAppSdk } from './appSdk';\nimport { useEventListener } from './useEventListener';\nexport function useAreaClick({ callback, precisionXPx, precisionYPx }) {\n    const clickedPosition = useRef({\n        clientX: 0,\n        clientY: 0\n    });\n    const ref = useRef(null);\n    const onMouseDown = useCallback((e) => {\n        clickedPosition.current = {\n            clientY: e.clientY,\n            clientX: e.clientX\n        };\n    }, []);\n    const onMouseUp = useCallback((e) => {\n        const xInArea = Math.abs(e.clientX - clickedPosition.current.clientX) < (precisionXPx ?? 10);\n        const yInArea = Math.abs(e.clientY - clickedPosition.current.clientY) < (precisionYPx ?? 10);\n        if (xInArea && yInArea) {\n            callback();\n        }\n    }, [callback, precisionXPx, precisionYPx]);\n    useEventListener('mousedown', onMouseDown, ref);\n    useEventListener('mouseup', onMouseUp, ref);\n    return ref;\n}\nexport function useOpenLinkOnAreaClick(url, source, track) {\n    const sdk = useAppSdk();\n    const event = useClickBrowser();\n    const callback = useCallback(() => {\n        event(url, source);\n        sdk.openPage(formatBrowserUrl(url, source, track));\n    }, [url, sdk, event]);\n    return useAreaClick({ callback });\n}\n","import queryString from 'query-string';\nexport const formatBrowserUrl = (source, camp, track) => {\n    const date = new Date();\n    const stringified = queryString.stringify({\n        utm_source: 'tonkeeper',\n        utm_campaign: camp === 'recommendation'\n            ? 'recom'\n            : `feat-${date.getMonth() + 1}-${date.getFullYear()}`,\n        utm_medium: track\n    });\n    const startChar = source.includes('?') ? '&' : '?';\n    return `${source}${startChar}${stringified}`;\n};\n","import { useEffect, useRef, useState } from 'react';\nimport { useIsMounted } from './useIsMounted';\nconst initialSize = {\n    width: undefined,\n    height: undefined\n};\nexport function useResizeObserver(options) {\n    const { ref, box = 'content-box' } = options;\n    const [{ width, height }, setSize] = useState(initialSize);\n    const isMounted = useIsMounted();\n    const previousSize = useRef({ ...initialSize });\n    const onResize = useRef(undefined);\n    onResize.current = options.onResize;\n    useEffect(() => {\n        if (!ref.current)\n            return;\n        if (typeof window === 'undefined' || !('ResizeObserver' in window))\n            return;\n        const observer = new ResizeObserver(([entry]) => {\n            const boxProp = box === 'border-box'\n                ? 'borderBoxSize'\n                : box === 'device-pixel-content-box'\n                    ? 'devicePixelContentBoxSize'\n                    : 'contentBoxSize';\n            const newWidth = extractSize(entry, boxProp, 'inlineSize');\n            const newHeight = extractSize(entry, boxProp, 'blockSize');\n            const hasChanged = previousSize.current.width !== newWidth ||\n                previousSize.current.height !== newHeight;\n            if (hasChanged) {\n                const newSize = { width: newWidth, height: newHeight };\n                previousSize.current.width = newWidth;\n                previousSize.current.height = newHeight;\n                if (onResize.current) {\n                    onResize.current(newSize);\n                }\n                else {\n                    if (isMounted()) {\n                        setSize(newSize);\n                    }\n                }\n            }\n        });\n        observer.observe(ref.current, { box });\n        return () => {\n            observer.disconnect();\n        };\n    }, [box, ref, isMounted]);\n    return { width, height };\n}\nfunction extractSize(entry, box, sizeType) {\n    if (!entry[box]) {\n        if (box === 'contentBoxSize') {\n            return entry.contentRect[sizeType === 'inlineSize' ? 'width' : 'height'];\n        }\n        return undefined;\n    }\n    return Array.isArray(entry[box])\n        ? entry[box][0][sizeType]\n        : // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore Support Firefox's non-standard behavior\n            entry[box][sizeType];\n}\n","import { useCallback, useEffect, useRef } from 'react';\nexport function useIsMounted() {\n    const isMounted = useRef(false);\n    useEffect(() => {\n        isMounted.current = true;\n        return () => {\n            isMounted.current = false;\n        };\n    }, []);\n    return useCallback(() => isMounted.current, []);\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { ChevronRightIcon } from '../../components/Icon';\nimport { ListBlock, ListItem } from '../../components/List';\nimport { Body3, H3, Label1, Label2 } from '../../components/Text';\nimport { Carousel } from '../../components/shared';\nimport { useAppContext } from '../../hooks/appContext';\nimport { useOpenLinkOnAreaClick } from '../../hooks/useAreaClick';\nimport { useElementSize } from '../../hooks/useElementSize';\nimport { BrowserRoute } from '../../libs/routes';\nimport { PromotedItem, PromotedItemImage, PromotedItemText } from './PromotedItem';\nconst Heading = styled.div `\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 14px 1rem;\n    gap: 1rem;\n`;\nconst AllButton = styled.button `\n    border: none;\n    background: transparent;\n    height: fit-content;\n    width: fit-content;\n    color: ${props => props.theme.textAccent};\n    cursor: pointer;\n    padding: 4px 8px;\n`;\nconst ListContainer = styled.div `\n    padding-left: 1rem;\n    padding-right: 1rem;\n`;\nconst ListBlockStyled = styled(ListBlock) `\n    width: ${props => props.width} !important;\n    margin-left: ${props => props.marginLeft} !important;\n    margin-bottom: 0;\n`;\nconst IconContainerStyled = styled.div `\n    margin-left: auto;\n    margin-right: 1rem;\n    color: ${props => props.theme.iconTertiary};\n    transition: transform 0.15s ease;\n`;\nconst ListItemStyled = styled(ListItem) `\n    padding-left: 1rem;\n\n    &:hover ${IconContainerStyled} {\n        transform: translateX(2px);\n    }\n`;\nexport const CategoryBlock = ({ category, className }) => {\n    const [containerRef, { width: w }] = useElementSize();\n    const width = w - 36;\n    const groups = useMemo(() => category.apps.reduce((acc, app, index) => {\n        if (index % 3 === 0) {\n            acc.push([app]);\n        }\n        else {\n            acc[acc.length - 1].push(app);\n        }\n        return acc;\n    }, []), [category.apps]);\n    const groupsKeys = useMemo(() => groups.map(group => group.map(i => i.url).join('')), [groups]);\n    const canExpand = groups.length > 1;\n    return (_jsxs(\"div\", { className: className, ref: containerRef, children: [_jsxs(Heading, { children: [_jsx(H3, { children: category.title }), canExpand && (_jsx(Link, { to: '.' + BrowserRoute.category + '/' + category.id, children: _jsx(AllButton, { children: _jsx(Label1, { children: \"All\" }) }) }))] }), canExpand ? (_jsx(Carousel, { gap: \"8px\", infinite: false, children: groups.map((group, groupIndex) => (_jsx(ListBlockStyled, { width: groupIndex === 0 || groupIndex === groups.length - 1\n                        ? (width - 28).toString() + 'px'\n                        : 'unset', marginLeft: groupIndex === 0 ? '-34px' : '0', children: group.map(item => (_jsx(CategoryGroupItem, { item: item }, item.url))) }, groupsKeys[groupIndex]))) })) : (groups.map((group, groupIndex) => (_jsx(ListContainer, { children: _jsx(ListBlockStyled, { width: \"100%\", children: group.map(item => (_jsx(CategoryGroupItem, { item: item }, item.url))) }, groupsKeys[groupIndex]) }, groupsKeys[groupIndex]))))] }));\n};\nexport const CategoryGroupItem = ({ item }) => {\n    const { tonendpoint } = useAppContext();\n    const ref = useOpenLinkOnAreaClick(item.url, 'recommendation', tonendpoint.getTrack());\n    return (_jsx(ListItemStyled, { ref: ref, children: _jsxs(PromotedItem, { children: [_jsx(PromotedItemImage, { src: item.icon }), _jsxs(PromotedItemText, { children: [_jsx(Label2, { children: item.name }), _jsx(Body3, { children: item.description })] }), _jsx(IconContainerStyled, { children: _jsx(ChevronRightIcon, {}) })] }) }, item.url));\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { QueryKey } from '../../libs/queryKey';\nimport { useUserCountry } from '../../state/country';\nimport { useAppContext } from '../appContext';\nexport function useRecommendations() {\n    const { tonendpoint } = useAppContext();\n    const country = useUserCountry();\n    const lang = country.data || 'en';\n    return useQuery([QueryKey.featuredRecommendations, lang], async () => {\n        const data = await tonendpoint.getAppsPopular(lang);\n        // TODO: Remove mobile hack\n        data.categories = data.categories.filter(item => item.id !== 'featured');\n        return data;\n    });\n}\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { SubHeader } from '../../components/SubHeader';\nimport { InnerBody } from '../../components/Body';\nimport { useParams } from 'react-router-dom';\nimport { CategoryGroupItem } from './CategoryBlock';\nimport { ListBlock } from '../../components/List';\nimport { useRecommendations } from '../../hooks/browser/useRecommendations';\nimport { RecommendationPageListItemSkeleton } from '../../components/skeletons/BrowserSkeletons';\nexport const CategoryPage = () => {\n    const { id } = useParams();\n    const { data } = useRecommendations();\n    const group = data?.categories.find(item => item.id === id);\n    return (_jsxs(_Fragment, { children: [_jsx(SubHeader, { title: group?.title }), _jsx(InnerBody, { children: group ? (_jsx(ListBlock, { children: group.apps.map(item => (_jsx(CategoryGroupItem, { item: item }, item.url))) })) : (_jsxs(ListBlock, { children: [_jsx(RecommendationPageListItemSkeleton, {}), _jsx(RecommendationPageListItemSkeleton, {}), _jsx(RecommendationPageListItemSkeleton, {}), _jsx(RecommendationPageListItemSkeleton, {}), _jsx(RecommendationPageListItemSkeleton, {})] })) })] }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport styled from 'styled-components';\nimport { Body3, Label2 } from '../Text';\nimport { Carousel } from '../shared';\nimport { useAppContext } from '../../hooks/appContext';\nimport { useOpenLinkOnAreaClick } from '../../hooks/useAreaClick';\nimport { PromotedItem, PromotedItemImage, PromotedItemText } from '../../pages/browser/PromotedItem';\nconst CarouselCard = styled.div `\n    width: 100%;\n    aspect-ratio: 2 / 1;\n\n    background-image: ${props => `url(${props.img})`};\n    background-size: cover;\n    border-radius: ${props => props.theme.cornerSmall};\n\n    display: inline-flex !important;\n    align-items: flex-end;\n    justify-content: flex-start;\n    cursor: pointer;\n`;\nconst CarouselCardFooter = styled(PromotedItem) `\n    margin-left: 1rem;\n`;\nexport const PromotionsCarousel = ({ apps, className, ...rest }) => {\n    const { config } = useAppContext();\n    const speed = config.featured_play_interval || 1000 * 10;\n    return (_jsx(Carousel, { className: className, gap: \"8px\", autoplay: true, centerPadding: \"16px\", autoplaySpeed: speed, ...rest, children: apps.map(item => (_jsx(CarouselItem, { item: item }, item.url))) }));\n};\nconst CarouselItem = ({ item }) => {\n    const { tonendpoint } = useAppContext();\n    const ref = useOpenLinkOnAreaClick(item.url, 'featured', tonendpoint.getTrack());\n    return (_jsx(CarouselCard, { img: item.poster, ref: ref, children: _jsxs(CarouselCardFooter, { children: [_jsx(PromotedItemImage, { src: item.icon }), _jsxs(PromotedItemText, { color: item.textColor, children: [_jsx(Label2, { children: item.name }), _jsx(Body3, { children: item.description })] })] }) }));\n};\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { InnerBody } from '../../components/Body';\nimport { BrowserHeader } from '../../components/Header';\nimport { RecommendationsPageBodySkeleton } from '../../components/skeletons/BrowserSkeletons';\nimport { useOpenBrowser } from '../../hooks/amplitude';\nimport { useRecommendations } from '../../hooks/browser/useRecommendations';\nimport { CategoryBlock } from './CategoryBlock';\nimport { PromotionsCarousel } from '../../components/browser/PromotionsCarousel';\nconst InnerBodyStyled = styled(InnerBody) `\n    padding: 0;\n`;\nconst PromotionsCarouselStyled = styled(PromotionsCarousel) `\n    margin-bottom: 1rem;\n`;\nconst CategoryBlockStyled = styled(CategoryBlock) `\n    margin-bottom: 1rem;\n`;\nconst SkeletonContainer = styled.div `\n    padding: 0 1rem;\n`;\nexport const BrowserRecommendationsPage = () => {\n    const { data } = useRecommendations();\n    const track = useOpenBrowser();\n    useEffect(() => {\n        if (data)\n            track();\n    }, [track, data]);\n    return (_jsxs(_Fragment, { children: [_jsx(BrowserHeader, {}), _jsx(InnerBodyStyled, { children: data ? (_jsxs(_Fragment, { children: [_jsx(PromotionsCarouselStyled, { apps: data.apps }), data.categories.map(category => (_jsx(CategoryBlockStyled, { category: category }, category.id)))] })) : (_jsx(SkeletonContainer, { children: _jsx(RecommendationsPageBodySkeleton, {}) })) })] }));\n};\n","import { useCallback, useRef, useState } from 'react';\nimport { useResizeObserver } from './useResizeObserver';\nexport function useElementSize() {\n    const ref = useRef(null);\n    const [size, setSize] = useState({\n        width: 0,\n        height: 0,\n        scrollWidth: 0,\n        scrollHeight: 0\n    });\n    const onResize = useCallback(() => {\n        setSize({\n            width: ref.current?.offsetWidth || 0,\n            height: ref.current?.offsetHeight || 0,\n            scrollWidth: ref.current?.scrollWidth || 0,\n            scrollHeight: ref.current?.scrollHeight || 0\n        });\n    }, []);\n    useResizeObserver({ ref, onResize });\n    return [ref, size];\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { BrowserRoute } from '../../libs/routes';\nimport { Route, Routes } from 'react-router-dom';\nimport { CategoryPage } from './CategoryPage';\nimport { BrowserRecommendationsPage } from './BrowserRecommendationsPage';\nconst BrowserPage = () => {\n    return (_jsxs(Routes, { children: [_jsx(Route, { path: BrowserRoute.category + '/:id', element: _jsx(CategoryPage, {}) }), _jsx(Route, { path: \"*\", element: _jsx(BrowserRecommendationsPage, {}) })] }));\n};\nexport default BrowserPage;\n"],"names":["useEventListener","eventName","handler","element","options","savedHandler","useRef","useLayoutEffect","current","useEffect","_element$current","targetElement","window","addEventListener","listener","event","removeEventListener","useOpenLinkOnAreaClick","url","source","track","sdk","useAppSdk","useClickBrowser","callback","useCallback","openPage","formatBrowserUrl","camp","date","Date","stringified","queryString","stringify","utm_source","utm_campaign","concat","getMonth","getFullYear","utm_medium","startChar","includes","_ref","precisionXPx","precisionYPx","clickedPosition","clientX","clientY","ref","onMouseDown","e","onMouseUp","xInArea","Math","abs","yInArea","useAreaClick","initialSize","width","undefined","height","useResizeObserver","box","setSize","useState","isMounted","useIsMounted","previousSize","onResize","observer","ResizeObserver","entry","boxProp","newWidth","extractSize","newHeight","newSize","observe","disconnect","sizeType","Array","isArray","contentRect","Heading","styled","div","_templateObject","_taggedTemplateLiteral","AllButton","button","_templateObject2","props","theme","textAccent","ListContainer","_templateObject3","ListBlockStyled","ListBlock","_templateObject4","marginLeft","IconContainerStyled","_templateObject5","iconTertiary","ListItemStyled","ListItem","_templateObject6","CategoryGroupItem","_ref2","item","tonendpoint","useAppContext","getTrack","_jsx","children","_jsxs","PromotedItem","PromotedItemImage","src","icon","PromotedItemText","Label2","name","Body3","description","ChevronRightIcon","useRecommendations","lang","useUserCountry","data","useQuery","QueryKey","featuredRecommendations","async","getAppsPopular","categories","filter","id","CategoryPage","useParams","group","find","_Fragment","SubHeader","title","InnerBody","apps","map","RecommendationPageListItemSkeleton","CarouselCard","img","cornerSmall","CarouselCardFooter","CarouselItem","poster","color","textColor","InnerBodyStyled","PromotionsCarouselStyled","className","rest","config","speed","featured_play_interval","Carousel","gap","autoplay","centerPadding","autoplaySpeed","CategoryBlockStyled","category","containerRef","w","size","scrollWidth","scrollHeight","_ref$current","_ref$current2","_ref$current3","_ref$current4","offsetWidth","offsetHeight","useElementSize","groups","useMemo","reduce","acc","app","index","push","length","groupsKeys","i","join","canExpand","H3","Link","to","BrowserRoute","Label1","infinite","groupIndex","toString","SkeletonContainer","BrowserRecommendationsPage","useOpenBrowser","BrowserHeader","RecommendationsPageBodySkeleton","BrowserPage","Routes","Route","path"],"sourceRoot":""}