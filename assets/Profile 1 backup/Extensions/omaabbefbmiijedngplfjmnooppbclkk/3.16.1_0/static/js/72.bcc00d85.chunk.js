"use strict";(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[72],{88072:(e,n,t)=>{t.r(n),t.d(n,{default:()=>fn});var r=t(80184),s=t(72791),i=t(23098),a=t(47578),d=t(30168),o=t(65867),l=t(61945),c=t(91153),u=t(5784),m=t(47712),x=t(68827),h=t(13093),p=t(11707);function f(e){return!!e.dns}var v=t(87594),g=t(88754),j=t(76978),_=t(1849),w=t(12020),b=t(93853),k=t(20220),y=t(82820),Z=t(34692);function C(e){var n;const t=(0,v.tN)();return void 0!==e.sale||!(0,k._k)(t.active.rawAddress,null===(n=e.owner)||void 0===n?void 0:n.address)}var P=t(45928),A=t(41235),S=t(97284);function N(e,n){let{caller:t,queryKey:r,options:s}=e;const{api:i}=(0,v.bp)(),a=(0,v.tN)();return(0,A.useQuery)(r,(async()=>{const e=await t({...n,walletState:a,api:i}),r=await new S.f7_(i.tonApiV2).emulateMessageToAccountEvent({ignoreSignatureCheck:!0,accountId:a.active.rawAddress,decodeMessageRequest:{boc:e}});return{fee:new j.n({asset:_.Ct,weiAmount:-1*r.extra}),payload:{event:r}}}),s)}const T=e=>N({caller:P.gP,queryKey:["estimate-link-nft",e.nftAddress,e.linkToAddress]},e);var F=t(98502),R=t(86871),L=t(33455),O=t(48063),$=t(8676);function z(e,n){let{executor:t,eventName2:r}=e;const{t:s}=(0,l.$)(),a=(0,i._H)(),{api:d}=(0,v.bp)(),o=(0,v.tN)(),c=(0,A.useQueryClient)(),u=(0,L.BJ)(),{mutateAsync:m}=(0,$.Ug)();return(0,A.useMutation)((async()=>{if(!n.fee)return!1;const e=await(0,R.TC)(a,o.publicKey,m).catch((()=>null));if("cell"!==(null===e||void 0===e?void 0:e.type))throw new O.E(s("ledger_operation_not_supported"));if(null===e)return!1;u(r);try{await t({api:d,walletState:o,signer:e,...n})}catch(i){await(0,F.cB)(c,a,s,i)}return await c.invalidateQueries([o.active.rawAddress]),await c.invalidateQueries(),!0}))}const B=e=>z({executor:P.Uy,eventName2:"link-dns"},e);var I=t(14182),H=t(86749);function D(e){const n=(0,v.tN)(),t=(0,s.useRef)(!0),{isLoading:r,data:i,mutate:a}=(0,H.gW)();(0,s.useEffect)((()=>{t.current=!1,a({address:e})}),[e]);return{recipient:(0,s.useMemo)((()=>({address:{address:(0,k.Tg)(e,n.network,!0),blockchain:I.S.TON},comment:"",done:!1,toAccount:i})),[i]),isLoading:!!t.current||r}}function E(){const{t:e}=(0,l.$)(),n=(0,i._H)(),t=(0,A.useQueryClient)();return r=>(0,F.cB)(t,n,e,r)}function V(e,n){const[t,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),[d,o]=(0,s.useState)(!1),l=(0,s.useRef)(e.data),c=async()=>{const t=await e.refetch();if(d&&r(!1),n(t.data,l.current))return r(!1),void a(!0);l.current=t.data,setTimeout(c,1e3)};return(0,s.useEffect)((()=>()=>o(!0)),[]),{isLoading:t,isCompleted:i,data:e.data,refetch:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;l.current=e.data,r(!0),o(!1),a(!1),setTimeout((()=>{t&&o(!0)}),n),c()}}}var q,M,W,Q,U=t(73643),K=t(26503),J=t(59598),Y=t(90820),G=t(38705);const X=e=>{var n;let{nft:t}=e;const a=(0,i.pm)(),{t:d}=(0,l.$)(),o=(0,c.Lc)(t),{data:u,isLoading:m}=o,x=(null===u||void 0===u||null===(n=u.wallet)||void 0===n?void 0:n.address)||"",{refetch:h,isLoading:p,isCompleted:f}=V(o,((e,n)=>{var t,r;return!(null===n||void 0===n||null===(t=n.wallet)||void 0===t||!t.address)!==!(null===e||void 0===e||null===(r=e.wallet)||void 0===r||!r.address)}));return(0,s.useEffect)((()=>{f&&a(d(x?"dns_address_linked":"dns_address_unlinked"))}),[f,x]),x?(0,r.jsx)(oe,{nft:t,linkedAddress:x,isLoading:p,refetch:h}):(0,r.jsx)(re,{nft:t,isLoading:m||p,refetch:h})},ee=(0,o.ZP)(m.pN)(q||(q=(0,d.Z)(["\n    cursor: pointer;\n    color: ",";\n    pointer-events: ",";\n"])),(e=>e.isDisabled?e.theme.textSecondary:e.theme.textAccent),(e=>e.isDisabled?"none":"unset")),ne=new Z.Z(.02),te=j.n.fromRelativeAmount({asset:_.Ct,amount:ne}),re=e=>{var n;let{nft:t,isLoading:i,refetch:d}=e;const o=E(),{t:c}=(0,l.$)(),[u,m]=(0,s.useState)(),x=(0,v.tN)(),[h,p]=(0,s.useState)(x.active.rawAddress),f=e=>{if("wallet"===u)return m("confirm");m(void 0),e?d():p(x.active.rawAddress)},{recipient:j,isLoading:_}=D(t.address),{refetch:w,...Z}=T({nftAddress:t.address,amount:(0,b.$O)(ne),linkToAddress:h}),P=(0,s.useCallback)((async e=>{p(e),await w(),m("confirm")}),[w,t.address]),A=B({nftAddress:t.address,amount:(0,b.$O)(ne),linkToAddress:h,fee:null===(n=Z.data)||void 0===n?void 0:n.payload}),S=(0,k.ks)(h,x.active.rawAddress),N=(0,s.useCallback)((()=>(0,r.jsx)(ae,{onSave:P,isLoading:Z.isFetching,domain:t.dns})),[P,Z.isFetching]),R=C(t),L=(0,y.s)(t.dns);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.zx,{type:"button",size:"large",secondary:!0,fullWidth:!0,disabled:R,loading:Z.isFetching||_||i,onClick:()=>{Z.error?o(Z.error):m("confirm")},children:c(L?"nft_link_username_button":"nft_link_domain_button")}),(0,r.jsx)(a.P_,{title:c("wallet"===u?"wallet_address":"send_screen_steps_comfirm_title"),isOpen:!!u,hideButton:!0,handleClose:()=>f(),backShadow:!0,children:"wallet"===u?N:()=>(0,r.jsxs)(G.vp,{onClose:f,recipient:j,assetAmount:te,fitContent:!0,estimation:Z,...A,children:[(0,r.jsx)(G.tv,{}),(0,r.jsx)(G.eZ,{}),(0,r.jsxs)(G.CP,{children:[(0,r.jsx)(K.HC,{hover:!1,children:(0,r.jsxs)(K.me,{children:[(0,r.jsx)(J.__,{children:c(S?"dns_current_address":"wallet_address")}),(0,r.jsx)(U.Uc,{right:!0,text:(0,k.FN)((0,k.Tg)(h,x.network)),secondary:(0,r.jsx)(ee,{isDisabled:A.isLoading,onClick:()=>m("wallet"),children:c("replace")})})]})}),(0,r.jsx)(G.pk,{}),(0,r.jsx)(G.RB,{})]}),(0,r.jsx)(G.mC,{children:(0,r.jsx)(G.uq,{MainButton:F.Rn})})]})})]})},se=(0,o.ZP)(m.mI)(M||(M=(0,d.Z)(["\n    color: ",";\n    margin-bottom: 1.5rem;\n"])),(e=>e.theme.textSecondary)),ie=(0,o.ZP)(a.QT)(W||(W=(0,d.Z)(["\n    align-items: flex-start;\n"]))),ae=e=>{let{onSave:n,isLoading:t,domain:i}=e;const{t:a}=(0,l.$)(),[d,o]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),m=(0,s.useMemo)((()=>{if(!c)return!0;try{return p.Address.parse(d),!0}catch{return!1}}),[c,d]);return(0,r.jsxs)(ie,{onSubmit:e=>{e.stopPropagation(),e.preventDefault(),u(!0);try{n(p.Address.parse(d).toRawString())}catch(t){console.error(t)}},children:[(0,r.jsx)(se,{children:a("add_dns_address").replace("%1%",i)}),(0,r.jsx)(Y.II,{disabled:t,isValid:m,value:d,onChange:o,label:a("wallet_address"),clearButton:!0}),(0,r.jsx)(U.Zv,{}),(0,r.jsx)(g.zx,{fullWidth:!0,size:"large",primary:!0,disabled:!d,loading:t,children:"Save"})]})},de=(0,o.ZP)(m.pN)(Q||(Q=(0,d.Z)(["\n    text-align: center;\n    color: ",";\n"])),(e=>e.theme.accentOrange)),oe=e=>{var n;let{nft:t,linkedAddress:i,isLoading:d,refetch:o}=e;const c=E(),{t:u}=(0,l.$)(),m=(0,v.tN)(),[x,h]=(0,s.useState)(!1),p=e=>{h(!1),e&&o()},{recipient:f,isLoading:j}=D(t.address),_=T({nftAddress:t.address,amount:(0,b.$O)(ne),linkToAddress:""}),Z=B({nftAddress:t.address,amount:(0,b.$O)(ne),linkToAddress:"",fee:null===(n=_.data)||void 0===n?void 0:n.payload}),P=C(t),A=(0,y.s)(t.dns),S=Object.values((0,w.$R)(m.publicKey,m.network)).every((e=>!(0,k.ks)(e.rawAddress,i)));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.zx,{type:"button",size:"large",secondary:!0,fullWidth:!0,disabled:P,loading:_.isFetching||j||d,onClick:()=>{_.error?c(_.error):h(!0)},children:u("nft_unlink_domain_button").replace("{{address}}",(0,k.FN)((0,k.Tg)(i,m.network)))}),S&&!d&&(0,r.jsx)(de,{children:u(A?"tme_linked_with_another_address_warn":"dns_linked_with_another_address_warn")}),(0,r.jsx)(a.P_,{title:u("confirm_unlink"),isOpen:x,hideButton:!0,handleClose:()=>p(),backShadow:!0,children:()=>(0,r.jsxs)(G.vp,{onClose:p,recipient:f,assetAmount:te,fitContent:!0,estimation:_,...Z,children:[(0,r.jsx)(G.tv,{}),(0,r.jsx)(G.eZ,{}),(0,r.jsxs)(G.CP,{children:[(0,r.jsx)(G.pk,{}),(0,r.jsx)(G.RB,{})]}),(0,r.jsx)(G.mC,{children:(0,r.jsx)(G.uq,{MainButton:F.Rn})})]})})]})};var le=t(79297);var ce,ue,me,xe=t(17636);const he=o.ZP.div(ce||(ce=(0,d.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"]))),pe=(0,o.ZP)(g.zx)(ue||(ue=(0,d.Z)(["\n    margin-bottom: 0.75rem;\n"]))),fe=(0,o.ZP)(m.pN)(me||(me=(0,d.Z)(["\n    color: ",";\n"])),(e=>e.danger?e.theme.accentRed:e.theme.textSecondary)),ve=new Z.Z(.02),ge=j.n.fromRelativeAmount({asset:_.Ct,amount:new Z.Z(.02)}),je={year:"numeric",hour:void 0,minute:void 0},_e=e=>{var n;let{nft:t}=e;const d=(0,i.pm)(),o=C(t),u=E(),{t:m,i18n:{language:x}}=(0,l.$)(),h=new Intl.RelativeTimeFormat((0,le.l1)(x),{style:"long"}),p=(0,c.id)(t),{data:f,isLoading:v}=p,{refetch:g,isLoading:j,isCompleted:_}=V(p,((e,n)=>!(null===e||void 0===e||!e.getTime())&&e.getTime()!==(null===n||void 0===n?void 0:n.getTime())));(0,s.useEffect)((()=>{_&&d(m("renew_nft_renewed"))}),[_]);const w=(0,xe.W)(Date.now()+316224e5,je),[k,y]=(0,s.useState)(!1),Z=e=>{y(!1),e&&g()},{recipient:A,isLoading:S}=D(t.address),T=(R={nftAddress:t.address,amount:(0,b.$O)(ve)},N({caller:P.mP,queryKey:["estimate-nft-renew",R.nftAddress]},R));var R;const L=(e=>z({executor:P.Uq,eventName2:"renew-dns"},e))({nftAddress:t.address,amount:(0,b.$O)(ve),fee:null===(n=T.data)||void 0===n?void 0:n.payload});if(!v&&!f)return null;const O=(0,xe.V)(f);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(he,{children:[(0,r.jsx)(pe,{type:"button",disabled:o||j,loading:v||T.isFetching||S,onClick:()=>{T.error?u(T.error):y(!0)},size:"large",secondary:!0,fullWidth:!0,children:j?m("renew_nft_in_progress"):m("dns_renew_until_btn").replace("%{untilDate}",w)}),""!==O&&(0,r.jsx)(fe,{danger:Number(O)<=30,children:m("renew_nft_expiration_date").replace("%1%",h.format(Number(O),"days"))})]}),(0,r.jsx)(a.P_,{isOpen:k,hideButton:!0,handleClose:()=>Z,backShadow:!0,children:()=>(0,r.jsx)(G.vp,{onClose:Z,recipient:A,assetAmount:ge,fitContent:!0,estimation:T,...L,children:(0,r.jsx)(G.mC,{children:(0,r.jsx)(G.uq,{MainButton:F.Rn})})})})]})};var we,be;const ke=e=>{const{marketplace:n}=e.metadata,t=p.Address.parse(e.address).toString();return"https://getgems.io/nft/".concat(t)},ye=e=>{let{url:n}=e;const{t:t}=(0,l.$)(),s=(0,i._H)();return(0,r.jsx)(g.zx,{size:"large",secondary:!0,fullWidth:!0,onClick:e=>{e.preventDefault(),e.stopPropagation(),s.openPage(n)},children:t("nft_open_in_marketplace")})},Ze=e=>{var n;let{nftItem:t}=e;const s=(0,i._H)(),{t:a}=(0,l.$)(),d=(0,v.tN)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.zx,{primary:!0,size:"large",fullWidth:!0,disabled:void 0!==t.sale||(null===(n=t.owner)||void 0===n?void 0:n.address)!==d.active.rawAddress,onClick:e=>{e.preventDefault(),e.stopPropagation(),s.uiEvents.emit("transferNft",{method:"transferNft",params:t})},children:a("nft_transfer_nft")}),t.sale&&(0,r.jsx)(Pe,{children:a("nft_on_sale_text")})]})},Ce=(0,o.ZP)(m.pN)(we||(we=(0,d.Z)(["\n    width: 100%;\n    color: ",";\n"])),(e=>e.theme.textSecondary)),Pe=(0,o.ZP)(Ce)(be||(be=(0,d.Z)(["\n    width: 100%;\n    padding: 0 1rem;\n    text-align: left;\n"]))),Ae=e=>{let{kind:n,nftItem:t}=e;switch(n){case"token":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ze,{nftItem:t}),(0,r.jsx)(ye,{url:ke(t)})]});case"ton.dns":var s;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ze,{nftItem:t}),(0,r.jsx)(ye,{url:"https://dns.ton.org/#".concat(null===(s=t.dns)||void 0===s?void 0:s.slice(0,-4))}),f(t)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X,{nft:t}),(0,r.jsx)(_e,{nft:t})]})]});case"telegram.number":{const e=t.metadata.name.replace(/\s/g,"").slice(1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ze,{nftItem:t}),(0,r.jsx)(ye,{url:"https://fragment.com/number/".concat(e)})]})}case"telegram.name":var i;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ze,{nftItem:t}),(0,r.jsx)(ye,{url:"https://fragment.com/username/".concat(null===(i=t.dns)||void 0===i?void 0:i.slice(0,-5))}),f(t)&&(0,r.jsx)(X,{nft:t})]})}};var Se,Ne,Te,Fe;const Re=o.ZP.div(Se||(Se=(0,d.Z)(["\n    width: 100%;\n"]))),Le=o.ZP.div(Ne||(Ne=(0,d.Z)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 0.625rem;\n"]))),Oe=(0,o.ZP)(m.RV)(Te||(Te=(0,d.Z)(["\n    cursor: pointer;\n    color: ",";\n"])),(e=>e.theme.textAccent)),$e=(0,o.ZP)(m.mI)(Fe||(Fe=(0,d.Z)(["\n    color: ",";\n"])),(e=>e.theme.textSecondary)),ze=s.memo((e=>{var n,t;let{nftItem:s}=e;const a=(0,v.tN)(),{t:d}=(0,l.$)(),{data:o}=(0,c.T_)(s.address),{data:x,isLoading:h}=(0,c.id)(s),f=(0,xe.W)(x,{year:"numeric",hour:void 0,minute:void 0}),g=null!==o&&void 0!==o?o:s,j=(0,i._H)(),{config:_}=(0,v.bp)(),w=null===(n=g.owner)||void 0===n?void 0:n.address,b=p.Address.parse(g.address).toString(),y=null!==(t=_.NFTOnExplorerUrl)&&void 0!==t?t:"https://tonviewer.com/nft/%s",Z=(0,k.Tg)(b,a.network,!0);return(0,r.jsxs)(Re,{children:[(0,r.jsxs)(Le,{children:[(0,r.jsx)(m.H3,{children:d("nft_details")}),(0,r.jsx)(Oe,{onClick:()=>j.openPage(y.replace("%s",b)),children:d("nft_view_in_explorer")})]}),(0,r.jsxs)(K.L8,{margin:!1,children:[w&&(0,r.jsx)(K.HC,{onClick:()=>j.copyToClipboard((0,k.Tg)(w,a.network)),children:(0,r.jsxs)(K.me,{children:[(0,r.jsx)($e,{children:d("nft_owner_address")}),(0,r.jsx)(m.RV,{children:(0,k.FN)((0,k.Tg)(w,a.network))})]})}),!(!x&&!h)&&(0,r.jsx)(K.HC,{hover:!1,children:(0,r.jsxs)(K.me,{children:[(0,r.jsx)($e,{children:d("dns_expiration_date")}),x?(0,r.jsx)(m.RV,{children:f}):(0,r.jsx)(u.L4,{})]})}),(0,r.jsx)(K.HC,{onClick:()=>j.copyToClipboard(Z),children:(0,r.jsxs)(K.me,{children:[(0,r.jsx)($e,{children:d("nft_contract_address")}),(0,r.jsx)(m.RV,{children:(0,k.FN)(Z)})]})})]})]})}));var Be,Ie,He,De,Ee,Ve,qe,Me,We,Qe,Ue,Ke=t(74639),Je=t(86704),Ye=t(30345),Ge=t(26313),Xe=t(79309);const en=o.ZP.div(Be||(Be=(0,d.Z)(["\n    display: flex;\n    flex-direction: column;\n    padding: 0.875rem 1rem;\n"]))),nn=o.ZP.div(Ie||(Ie=(0,d.Z)(["\n    border-top: 1px solid ",";\n"])),(e=>e.theme.separatorCommon)),tn=(0,o.ZP)(m.RV)(He||(He=(0,d.Z)(["\n    margin-bottom: 0.5rem;\n"]))),rn=o.ZP.span(De||(De=(0,d.Z)(["\n    position: relative;\n    top: 3px;\n    margin-left: 4px;\n"]))),sn="0:b774d95eb20543f186c06b371ab88ad704f7e256130caf96189368a7d0cb6ccf",an="0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2",dn="0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2",on=(0,o.ZP)(m.H2)(Ee||(Ee=(0,d.Z)(["\n    word-break: break-word;\n\n    user-select: none;\n"]))),ln=(0,o.ZP)(m.cV)(Ve||(Ve=(0,d.Z)(["\n    color: ",";\n    border: 1px solid ",";\n    border-radius: 6px;\n    padding: 3.5px 6px 4.5px;\n    text-transform: uppercase;\n\n    position: relative;\n    top: -3px;\n\n    white-space: nowrap;\n"])),(e=>e.theme.textSecondary),(e=>e.theme.buttonTertiaryBackground)),cn=(0,o.ZP)(m.pN)(qe||(qe=(0,d.Z)(["\n    color: ",";\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n"])),(e=>e.isTrusted?e.theme.textSecondary:e.theme.accentOrange)),un=o.ZP.div(Me||(Me=(0,d.Z)(["\n    text-align: center;\n"]))),mn=o.ZP.div(We||(We=(0,d.Z)(["\n    display: flex;\n    gap: 8px;\n    width: 100%;\n\n    > * {\n        flex: 1;\n    }\n"]))),xn=o.ZP.div(Qe||(Qe=(0,d.Z)(["\n    .drop-down-container {\n        z-index: 100;\n        top: calc(100% + 12px);\n        right: 0;\n    }\n"]))),hn=(0,o.ZP)(K.L8)(Ue||(Ue=(0,d.Z)(["\n    margin: 0;\n\n    svg {\n        color: ",";\n    }\n"])),(e=>e.theme.accentBlue)),pn=e=>{var n,t,d,o,p,f,j;let{onClose:_,nftItem:w}=e;const{mutateAsync:b,isLoading:k}=(0,Je.qZ)(),{mutate:y,isLoading:Z}=(0,Je.Bo)(),{mutateAsync:C}=(0,Je.h8)(),{data:P}=(0,c.jd)(),A=w.trust!==S.DPS.Whitelist,N=!(null===P||void 0===P||!P.trustedNfts.includes((null===(n=w.collection)||void 0===n?void 0:n.address)||w.address)),T=(0,s.useRef)(null),{t:F}=(0,l.$)(),{data:R}=(0,c._7)(w),{description:L}=w.metadata,O=null!==(t=w.dns)&&void 0!==t?t:w.metadata.name,$=(0,s.useMemo)((()=>{var e;switch(null===(e=w.collection)||void 0===e?void 0:e.address){case sn:return"ton.dns";case an:return"telegram.name";case dn:return"telegram.number";default:return"token"}}),[w]),z=null===w||void 0===w||null===(d=w.collection)||void 0===d?void 0:d.name,B=null===(o=w.previews)||void 0===o?void 0:o.find((e=>"1500x1500"===e.resolution)),{isOpen:I,onClose:H,onOpen:D}=(0,Ge.q)(),{config:E}=(0,v.bp)(),V=(0,i._H)(),q=null!==(p=E.NFTOnExplorerUrl)&&void 0!==p?p:"https://tonviewer.com/nft/%s";return(0,r.jsxs)(a.QT,{children:[_&&(0,r.jsxs)(a.hy,{children:[(0,r.jsx)(x.z,{onClick:_,children:(0,r.jsx)(u.v4,{})}),(0,r.jsxs)(un,{children:[(0,r.jsx)(m.H3,{children:null!==(f=w.dns)&&void 0!==f?f:w.metadata.name}),A&&(0,r.jsxs)(cn,{isTrusted:N,onClick:D,children:[F("suspicious_label_full"),"\xa0",(0,r.jsx)(u.uM,{color:N?"textSecondary":"accentOrange"})]})]}),(0,r.jsx)(Ye.i,{isOpen:I,onClose:e=>{"mark_spam"===e?b(w).then(_):"mark_trusted"===e&&y(w),H()},isTrusted:N}),(0,r.jsx)(xn,{children:(0,r.jsx)(Xe.vb,{containerClassName:"drop-down-container",payload:e=>(0,r.jsxs)(hn,{children:[(0,r.jsx)(K.Sp,{onClick:()=>{e(),C(w).then(_)},children:(0,r.jsxs)(K.me,{children:[(0,r.jsx)(m.RV,{children:F("nft_actions_hide_nft")}),(0,r.jsx)(u.d9,{})]})}),(0,r.jsx)(K.Sp,{onClick:()=>{e(),b(w).then(_)},children:(0,r.jsxs)(K.me,{children:[(0,r.jsx)(m.RV,{children:F("nft_actions_hide_and_report")}),(0,r.jsx)(u.wD,{})]})}),(0,r.jsx)(K.Sp,{onClick:()=>V.openPage(q.replace("%s",w.address)),children:(0,r.jsxs)(K.me,{children:[(0,r.jsx)(m.RV,{children:F("nft_actions_view_on_explorer")}),(0,r.jsx)(u.n9,{})]})})]}),children:(0,r.jsx)(x.z,{children:(0,r.jsx)(u.ws,{})})})})]}),A&&!N&&(0,r.jsxs)(mn,{children:[(0,r.jsx)(g.zx,{warn:!0,type:"button",onClick:()=>b(w).then(_),loading:k,children:F("suspicious_buttons_report")}),(0,r.jsx)(g.zx,{type:"button",onClick:()=>y(w),loading:Z,children:F("suspicious_buttons_not_spam")})]}),(0,r.jsxs)(Ke.qR,{children:[B&&(0,r.jsx)(Ke.Ee,{ref:T,url:B.url}),(0,r.jsxs)(en,{children:[(0,r.jsxs)(on,{children:[O,w.sale&&(0,r.jsxs)(r.Fragment,{children:["  ",(0,r.jsx)(ln,{children:F("nft_on_sale")})]})]}),z&&(0,r.jsxs)(h.u,{open:!0,margin:"small",children:[z,w.approvedBy&&w.approvedBy.length>0&&(0,r.jsx)(rn,{children:(0,r.jsx)(u.of,{})})]}),L&&(0,r.jsx)(h.F,{text:L,margin:"last",contentColor:!0})]}),R&&(null===(j=R.metadata)||void 0===j?void 0:j.description)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nn,{}),(0,r.jsxs)(en,{children:[(0,r.jsx)(tn,{children:F("nft_about_collection")}),(0,r.jsx)(h.F,{text:R.metadata.description,margin:"last",contentColor:!0})]})]})]}),(0,r.jsx)(Ae,{nftItem:w,kind:$}),(0,r.jsx)(ze,{nftItem:w,kind:$})]})},fn=()=>{const e=(0,i._H)(),[n,t]=(0,s.useState)(void 0),d=(0,s.useCallback)((()=>{t(void 0)}),[t]);(0,s.useEffect)((()=>{const n=e=>{t(e.params)};return e.uiEvents.on("nft",n),()=>{e.uiEvents.off("nft",n)}}),[e,t]);const o=(0,s.useCallback)((()=>{if(n)return(0,r.jsx)(pn,{onClose:d,nftItem:n})}),[n,d]);return(0,r.jsx)(a.P_,{isOpen:void 0!==n,hideButton:!0,handleClose:d,backShadow:!0,children:o})}},74639:(e,n,t)=>{t.d(n,{Ee:()=>C,JQ:()=>T,qR:()=>y});var r,s,i,a,d,o,l,c,u,m,x=t(30168),h=t(80184),p=t(72791),f=t(65867),v=t(87594),g=t(23098),j=t(17636),_=t(91153),w=t(5784),b=t(67418);const k=f.ZP.div(r||(r=(0,x.Z)(["\n    display: grid;\n    margin: 0 0 2rem 0;\n    gap: 0.5rem;\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n"]))),y=f.ZP.div(s||(s=(0,x.Z)(["\n    position: relative;\n    user-select: none;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n\n    background-color: ",";\n    transition: background-color 0.1s ease;\n\n    border-radius: ",";\n\n    overflow: hidden;\n\n    ","\n"])),(e=>e.theme.backgroundContent),(e=>e.theme.cornerSmall),(e=>e.ios?e.isHover?(0,f.iv)(i||(i=(0,x.Z)(["\n                    background-color: ",";\n                "])),e.theme.backgroundContentTint):void 0:e.hover?(0,f.iv)(a||(a=(0,x.Z)(["\n                    cursor: pointer;\n\n                    &:hover {\n                        background-color: ",";\n                    }\n                "])),e.theme.backgroundContentTint):void 0)),Z=f.ZP.div(d||(d=(0,x.Z)(["\n    width: 100%;\n    position: relative;\n"]))),C=f.ZP.div(o||(o=(0,x.Z)(["\n    width: 100%;\n    padding-bottom: 100%;\n\n    ","\n    background-size: cover;\n"])),(e=>e.url&&(0,f.iv)(l||(l=(0,x.Z)(["\n            background-image: url('","');\n        "])),e.url))),P=f.ZP.div(c||(c=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    padding: 0.5rem 0.75rem 0.5rem;\n    white-space: nowrap;\n"]))),A=f.ZP.div(u||(u=(0,x.Z)(["\n    position: absolute;\n    top: 10px;\n    right: 8px;\n"]))),S=f.ZP.div(m||(m=(0,x.Z)(["\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    height: 32px;\n    width: 32px;\n"]))),N=p.memo((e=>{var n;let{nft:t,resolution:r,onOpen:s}=e;const i=void 0!==t.sale,a=null===(n=t.previews)||void 0===n?void 0:n.find((e=>e.resolution===r)),{ios:d}=(0,v.bp)(),[o,l]=(0,p.useState)(!1),c=(0,p.useRef)(null),u=(0,p.useContext)(v._N),{data:m}=(0,_.id)(t);(0,p.useLayoutEffect)((()=>{c.current&&u&&c.current.contains(u)?l(!0):l(!1)}),[c.current,u,l]);const x=m&&Number((0,j.V)(m))<=30;return(0,h.jsxs)(y,{hover:!0,isHover:o,ios:d,ref:c,onClick:()=>s(t),children:[(0,h.jsxs)(Z,{children:[(0,h.jsx)(C,{url:null===a||void 0===a?void 0:a.url}),i&&(0,h.jsx)(A,{children:(0,h.jsx)(w.rG,{})}),x&&(0,h.jsx)(S,{children:(0,h.jsx)(w.XN,{})})]}),(0,h.jsxs)(P,{children:[(0,h.jsx)(b.Ok,{nft:t}),(0,h.jsx)(b.is,{nft:t})]})]})})),T=e=>{let{nfts:n,className:t}=e;const r=(0,g._H)();return(0,h.jsx)(k,{className:t,children:(null!==n&&void 0!==n?n:[]).map((e=>{var n;return"hidden"===(null===(n=e.metadata)||void 0===n?void 0:n.render_type)?(0,h.jsx)(h.Fragment,{}):(0,h.jsx)(N,{nft:e,resolution:"500x500",onOpen:()=>r.openNft(e)},e.address)}))})}},17636:(e,n,t)=>{t.d(n,{V:()=>d,W:()=>a});var r=t(79297),s=t(72791),i=t(61945);function a(e,n){const{i18n:t}=(0,i.$)();return(0,s.useMemo)((()=>e?new Intl.DateTimeFormat((0,r.l1)(t.language),{month:"short",day:"numeric",year:(new Date).getFullYear()-1===new Date(e).getFullYear()?"numeric":void 0,hour:"numeric",minute:"numeric",...n}).format(e):""),[e,t.language,n])}function d(e){if(!e)return"";const n=Math.floor((new Date(e).getTime()-Date.now())/864e5);return n<0?"0":n.toString()}}}]);
//# sourceMappingURL=72.bcc00d85.chunk.js.map