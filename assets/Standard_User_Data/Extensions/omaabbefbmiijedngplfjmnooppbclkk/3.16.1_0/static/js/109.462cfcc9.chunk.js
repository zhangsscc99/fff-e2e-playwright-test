(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[109],{52694:(e,n,t)=>{"use strict";t.r(n),t.d(n,{SignerContent:()=>m,default:()=>v});var s=t(80184),i=t(6952),r=t(77220);var o=t(72791),a=t(87594),d=t(23098),l=t(54143);var c=t(61945),u=t(47578),x=t(88754),p=t(56494),h=t(53961);const m=e=>{let{sdk:n,transactionParams:t,onClose:d,handleResult:m}=e;const v=(0,a.tN)(),{t:g}=(0,c.$)(),{extension:j}=(0,a.bp)();((e,n)=>{(0,o.useEffect)((()=>(e.uiEvents.on("navigate",n),()=>{e.uiEvents.off("navigate",n)})),[e,n])})(n,d);const f=(0,o.useCallback)((e=>{const n=(new i.x).parseSignature(e);m(n.signature)}),[]),b=(0,l.L)(null,f),k=(0,o.useMemo)((()=>{return e=t.message,n=t.messageType,s=v.active.friendlyAddress,i=t.pathInfo,new r.x({origin:"TonKeeper"}).generateSignRequest({signData:e.toString("hex"),dataType:"transaction"===n?1:2,address:s,xfp:null===i||void 0===i?void 0:i.mfp,derivationPath:null===i||void 0===i?void 0:i.path});var e,n,s,i}),[t]);return(0,s.jsxs)(u.QT,{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),b()},children:[(0,s.jsx)(p.VO,{title:g("keystone_sign_title"),description:g("keystone_sign_subtitle")}),(0,s.jsx)(p.Aq,{extension:j,margin:!0,children:(0,s.jsx)(h.Gb,{data:k})}),(0,s.jsx)(x.zx,{primary:!0,size:"large",fullWidth:!0,type:"submit",children:g("signer_scan_result")})]})},v=()=>{const e=(0,d._H)(),[n,t]=(0,o.useState)(void 0),[i,r]=(0,o.useState)(void 0),a=(0,o.useCallback)((()=>{t(void 0),r(void 0)}),[]),l=(0,o.useCallback)((n=>{e.uiEvents.emit("response",{method:"response",id:i,params:n}),a()}),[e,i,a]),c=(0,o.useCallback)((()=>{i&&e.uiEvents.emit("response",{method:"response",id:i,params:new Error("Cancel auth request")}),a()}),[i,e,a]);(0,o.useEffect)((()=>{const n=e=>{t(e.params),r(e.id)};return e.uiEvents.on("keystone",n),()=>{e.uiEvents.off("keystone",n)}}),[e]);const x=(0,o.useCallback)((()=>{if(n&&i)return(0,s.jsx)(m,{sdk:e,transactionParams:n,onClose:c,handleResult:l})}),[e,n,i,c,l]);return(0,s.jsx)(u.P_,{isOpen:null!=n&&null!=i,handleClose:c,children:x})}},56494:(e,n,t)=>{"use strict";t.d(n,{Aq:()=>O,ON:()=>L,VO:()=>H});var s,i,r,o,a,d,l,c,u,x,p=t(30168),h=t(80184),m=t(14182),v=t(20220),g=t(72791),j=t(37887),f=t(4959),b=t(73485),k=t(65867),C=t(87594),w=t(23098),y=t(61945),_=t(35300),S=t(5784),Z=t(47578),E=t(47712),T=t(88754),R=t(98502),P=t(53961);const A=k.ZP.div(s||(s=(0,p.Z)(["\n    display: flex;\n    align-items: center;\n"]))),O=k.ZP.div(i||(i=(0,p.Z)(["\n    padding: 20px;\n    width: 100%;\n    box-sizing: border-box;\n    border-radius: 20px;\n    background: white;\n    max-width: 300px;\n\n    ","\n\n    ","\n\n    canvas {\n        width: 100% !important;\n        height: 100% !important;\n        position: absolute;\n    }\n"])),(e=>e.margin&&(0,k.iv)(r||(r=(0,p.Z)(["\n            margin-bottom: 16px;\n        "])))),(e=>e.extension&&(0,k.iv)(o||(o=(0,p.Z)(["\n            @media (max-width: 768px) {\n                max-width: 217px;\n                padding: 16px;\n            }\n        "]))))),z=(0,k.ZP)(E.mI)(a||(a=(0,p.Z)(["\n    display: inline-block;\n    word-break: break-all;\n    color: black;\n    margin: 16px 4px 0;\n    text-align: center;\n    ","\n"])),(e=>e.extension&&(0,k.iv)(d||(d=(0,p.Z)(["\n            @media (max-width: 768px) {\n                margin-top: 8px;\n            }\n        "]))))),N=k.ZP.div(l||(l=(0,p.Z)(["\n    display: flex;\n    padding-bottom: 16px;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n\n    ","\n"])),(e=>e.extension&&(0,k.iv)(c||(c=(0,p.Z)(["\n            @media (max-width: 768px) {\n                padding-bottom: 0;\n            }\n        "]))))),I=(0,k.ZP)(E.H3)(u||(u=(0,p.Z)(["\n    text-align: center;\n"]))),q=(0,k.ZP)(E.mI)(x||(x=(0,p.Z)(["\n    text-align: center;\n    color: ",";\n"])),(e=>e.theme.textSecondary)),H=(m.S.TON,m.S.TON,m.S.TRON,e=>{let{title:n,description:t}=e;const{extension:s}=(0,C.bp)();return(0,h.jsxs)(N,{extension:s,children:[n&&(0,h.jsx)(I,{children:n}),(0,h.jsx)(q,{children:t})]})}),Q=e=>{let{address:n}=e;const t=(0,w._H)(),{t:s}=(0,y.$)();return(0,h.jsx)(A,{children:(0,h.jsxs)(T.zx,{secondary:!0,onClick:e=>{e.preventDefault(),t.copyToClipboard(n,s("address_copied"))},children:[(0,h.jsx)(S.TI,{}),(0,h.jsx)("span",{children:s("Copy_address")})]})})},D=e=>{let{jetton:n}=e;const t=(0,w._H)(),{extension:s}=(0,C.bp)(),i=(0,C.tN)(),{t:r}=(0,y.$)(),o=(0,v.Tg)(i.active.rawAddress,i.network);return(0,h.jsxs)(Z.QT,{children:[(0,h.jsx)(H,{title:r("receive_ton"),description:r("receive_ton_description")}),(0,h.jsxs)(O,{extension:s,onClick:e=>{e.preventDefault(),t.copyToClipboard(o,r("address_copied"))},children:[(0,h.jsx)(P.Ak,{children:(0,h.jsx)(j.QRCode,{size:400,value:(0,v.VY)({address:o,jetton:n}),logoImage:"https://wallet.tonkeeper.com/img/toncoin.svg",logoPadding:8,qrStyle:"dots",eyeRadius:{inner:2,outer:16}})}),(0,h.jsx)(z,{extension:s,children:o})]}),(0,h.jsx)(Q,{address:o})]})},$=e=>{let{tron:n}=e;const t=(0,w._H)(),{t:s}=(0,y.$)(),{extension:i}=(0,C.bp)();return(0,h.jsxs)(Z.QT,{children:[(0,h.jsx)(H,{title:s("receive_trc20"),description:s("receive_trc20_description")}),(0,h.jsxs)(O,{extension:i,onClick:e=>{e.preventDefault(),t.copyToClipboard(n.walletAddress,s("address_copied"))},children:[(0,h.jsx)(P.Ak,{children:(0,h.jsx)(j.QRCode,{size:400,value:n.walletAddress,logoImage:"https://wallet-dev.tonkeeper.com/img/usdt.svg",logoPadding:8,qrStyle:"dots",eyeRadius:{inner:2,outer:16}})}),(0,h.jsx)(z,{extension:i,children:n.walletAddress})]}),(0,h.jsx)(Q,{address:n.walletAddress})]})},L=e=>{let{chain:n=m.S.TON,jetton:t,handleClose:s}=e;const{standalone:i}=(0,C.bp)(),[r,o]=(0,g.useState)(n),{data:a}=(0,_.yw)(r===m.S.TRON),d=(0,g.useRef)(null),l=(0,g.useRef)(null),c=r===m.S.TON||!a,u=c?d:l,x=c?"ton":"tron";return(0,h.jsxs)(Z.Jz,{standalone:i,children:[(0,h.jsx)(Z.JE,{children:(0,h.jsx)(Z.O$,{children:(0,h.jsx)(Z.Xk,{handleClose:s,center:!0})})}),(0,h.jsx)(R.im,{standalone:!1,extension:!0,fullWidth:!0,children:(0,h.jsx)(f.Z,{childFactory:(0,R.mH)(!c),children:(0,h.jsx)(b.Z,{nodeRef:u,classNames:"right-to-left",addEndListener:e=>{setTimeout(e,R.x9)},children:(0,h.jsx)("div",{ref:u,children:c?(0,h.jsx)(D,{jetton:t}):(0,h.jsx)($,{tron:a})})},x)})})]})}},53961:(e,n,t)=>{"use strict";t.d(n,{Ak:()=>c,Gb:()=>u});var s,i=t(30168),r=t(80184),o=t(45351),a=t.n(o),d=t(72791),l=t(37887);const c=t(65867).zo.div(s||(s=(0,i.Z)(["\n    width: 100%;\n    padding-bottom: 100%;\n    position: relative;\n"])));d.memo((e=>{let{message:n}=e;const[t,s]=(0,d.useState)("");return(0,d.useEffect)((()=>{const e=function(e,n){for(var t=[],s=0,i=e.length;s<i;)t.push(e.slice(s,s+=n));return t}([...n],256);if(1===e.length)s(n);else{let n=0;setInterval((()=>{let t=e[n];s(t.join("")),n++,n===e.length&&(n=0)}),100)}}),[n]),(0,r.jsx)(c,{children:(0,r.jsx)(l.QRCode,{size:400,value:t,qrStyle:"dots",eyeRadius:{inner:2,outer:16}})})}));const u=e=>{let{data:n}=e;const t=(0,d.useMemo)((()=>new(a())(n)),[]),[s,i]=(0,d.useState)(t.nextPart());return(0,d.useEffect)((()=>{const e=setInterval((()=>{i(t.nextPart().toUpperCase())}),200);return()=>{clearInterval(e)}}),[]),(0,r.jsx)(c,{children:(0,r.jsx)(l.QRCode,{size:400,value:s,qrStyle:"dots",eyeRadius:{inner:2,outer:16}})})}},54143:(e,n,t)=>{"use strict";t.d(n,{L:()=>a});var s=t(55516),i=t.n(s),r=t(72791),o=t(23098);const a=(e,n)=>{const t=(0,o._H)(),[s,a]=(0,r.useState)(e),d=(0,r.useMemo)((()=>new(i())),[]),l=(0,r.useCallback)((()=>{s&&t.uiEvents.emit("scan",{method:"scan",id:s,params:void 0})}),[t,s]);return(0,r.useEffect)((()=>{l()}),[l]),(0,r.useEffect)((()=>{const e=e=>{e.id===s&&(d.receivePart(e.params),d.isComplete()?n(d.resultUR()):l())};return t.uiEvents.on("response",e),()=>{t.uiEvents.off("response",e)}}),[t,s,n,l]),(0,r.useCallback)((()=>{a(Date.now())}),[a])}},81563:()=>{},60943:()=>{}}]);
//# sourceMappingURL=109.462cfcc9.chunk.js.map